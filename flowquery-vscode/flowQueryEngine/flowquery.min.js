!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.FlowQuery=t():e.FlowQuery=t()}(self,()=>(()=>{"use strict";var e={6090(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(7474));class i extends s.default{}t.default=i},7474(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(7056));t.default=class{constructor(e=null,t=null){if((null===e||""===e)&&null===t)throw new Error("Either statement or AST must be provided");const r=null!==t?t:(new i.default).parse(e);this.first=r.firstChild(),this.last=r.lastChild()}run(){return n(this,void 0,void 0,function*(){return new Promise((e,t)=>n(this,void 0,void 0,function*(){try{yield this.first.initialize(),yield this.first.run(),yield this.first.finish(),e()}catch(e){t(e)}}))})}get results(){return this.last.results}}},4831(e,t){Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e=[]){this._index=-1,this._positions=e}add(e){this._positions.push(e)}get position(){return this._positions[this._index]}reset(){this._index=-1}next(){return this._index<this._positions.length-1&&(this._index++,!0)}clone(){return new r([...this._positions])}}class n{constructor(e){this._indexes=new Map,this._current=-1,this._indexes=e}index(e){return this._indexes.has(e)||this._indexes.set(e,new Map),this._indexes.get(e)}get indexes(){return this._indexes}get current(){return this._current}set current(e){this._current=e}}t.default=class{constructor(e=[]){this._records=[],this._layers=new Map,this._records=e,this._layers.set(0,new n(new Map))}_buildIndex(e,t=0){const n=this.layer(t).index(e);n.clear(),this._records.forEach((t,s)=>{t.hasOwnProperty(e)&&(n.has(t[e])||n.set(t[e],new r),n.get(t[e]).add(s))})}layer(e=0){if(!this._layers.has(e)){const t=this._layers.get(0),r=new Map;for(const[e,n]of t.indexes){const t=new Map;for(const[e,r]of n)t.set(e,r.clone());r.set(e,t)}this._layers.set(e,new n(r))}return this._layers.get(e)}_find(e,t=0,r){const n=r?this.layer(t).index(r):this.layer(t).indexes.values().next().value;if(n&&n.has(e)){const r=n.get(e);return r.next()?(this.layer(t).current=r.position,!0):(this.layer(t).current=this._records.length,!1)}return this.layer(t).current=this._records.length,!1}reset(){for(const e of this._layers.values()){e.current=-1;for(const t of e.indexes.values())for(const e of t.values())e.reset()}}next(e=0){return this.layer(e).current<this._records.length-1&&(this.layer(e).current++,!0)}current(e=0){return this.layer(e).current<this._records.length?this._records[this.layer(e).current]:null}}},5346(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})},s=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(r(4603)),a=i(r(1126)),u=i(r(6025)),l=i(r(6971)),c=i(r(165)),h=i(r(3784));class d{static getInstance(){return d.instance||(d.instance=new d),d.instance}addNode(e,t){if(null===e.label)throw new Error("Node label is null");const r=new u.default(null,e.label);r.statement=t,d.nodes.set(e.label,r)}getNode(e){return d.nodes.get(e.label)||null}addRelationship(e,t){if(null===e.type)throw new Error("Relationship type is null");const r=new l.default(null,e.type);r.statement=t,r.source=e.source,r.target=e.target,d.relationships.set(e.type,r)}getRelationship(e){return d.relationships.get(e.type)||null}getRelationships(e){const t=[];for(const r of e.types){const e=d.relationships.get(r);e&&t.push(e)}return t}schema(){return n(this,void 0,void 0,function*(){var e,t;const r=[];for(const[e,t]of d.nodes){const n=yield t.data(),i={kind:"Node",label:e};if(n.length>0){const e=n[0],{id:t}=e,r=s(e,["id"]),o=Object.keys(r);o.length>0&&(i.properties=o,i.sample=r)}r.push(i)}for(const[n,i]of d.relationships){const o=yield i.data(),a={kind:"Relationship",type:n,from_label:(null===(e=i.source)||void 0===e?void 0:e.label)||null,to_label:(null===(t=i.target)||void 0===t?void 0:t.label)||null};if(o.length>0){const e=o[0],{left_id:t,right_id:r}=e,n=s(e,["left_id","right_id"]),i=Object.keys(n);i.length>0&&(a.properties=i,a.sample=n)}r.push(a)}return r})}getData(e){return n(this,void 0,void 0,function*(){if(e instanceof o.default){const t=this.getNode(e);if(null===t)throw new Error(`Physical node not found for label ${e.label}`);const r=yield t.data();return new a.default(r)}if(e instanceof c.default){if(e.types.length>1){const t=this.getRelationships(e);if(0===t.length)throw new Error(`No physical relationships found for types ${e.types.join(", ")}`);const r=[];for(let n=0;n<t.length;n++){const s=yield t[n].data(),i=e.types[n];for(const e of s)r.push(Object.assign(Object.assign({},e),{_type:i}))}return new h.default(r)}const t=this.getRelationship(e);if(null===t)throw new Error(`Physical relationship not found for type ${e.type}`);const r=yield t.data();return new h.default(r)}throw new Error("Element is neither Node nor Relationship")})}}d.nodes=new Map,d.relationships=new Map,t.default=d},8659(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this._min=0,this._max=1}set min(e){this._min=e}get min(){return this._min}set max(e){this._max=e}get max(){return this._max}multi(){return this._max>1||-1===this._max}}},4603(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(1542));class o extends i.default{constructor(e=null,t=null){super(),this._identifier=null,this._label=null,this._properties=new Map,this._value=null,this._incoming=null,this._outgoing=null,this._data=null,this._todoNext=null,this._identifier=e,this._label=t}set identifier(e){this._identifier=e}get identifier(){return this._identifier}set label(e){this._label=e}get label(){return this._label}get properties(){return this._properties}set properties(e){this._properties=e}_matchesProperties(e=0){const t=this._data;for(const[r,n]of this._properties){const s=t.current(e);if(null===s)throw new Error("No current node data available");if(!(r in s))throw new Error("Node does not have property");return s[r]===n.value()}return!0}setProperty(e,t){this._properties.set(e,t)}getProperty(e){return this._properties.get(e)||null}setValue(e){this._value=e}value(){return this._value}set outgoing(e){this._outgoing=e}get outgoing(){return this._outgoing}set incoming(e){this._incoming=e}get incoming(){return this._incoming}setData(e){this._data=e}next(){return n(this,void 0,void 0,function*(){var e,t,r,n;for(null===(e=this._data)||void 0===e||e.reset();null===(t=this._data)||void 0===t?void 0:t.next();)this.setValue(null===(r=this._data)||void 0===r?void 0:r.current()),this._matchesProperties()&&(yield null===(n=this._outgoing)||void 0===n?void 0:n.find(this._value.id),yield this.runTodoNext())})}find(e){return n(this,arguments,void 0,function*(e,t=0){var r,n,s,i,o;for(null===(r=this._data)||void 0===r||r.reset();null===(n=this._data)||void 0===n?void 0:n.find(e,t);)this.setValue(null===(s=this._data)||void 0===s?void 0:s.current(t)),this._matchesProperties(t)&&(null===(i=this._incoming)||void 0===i||i.setEndNode(this),yield null===(o=this._outgoing)||void 0===o?void 0:o.find(this._value.id,t),yield this.runTodoNext())})}set todoNext(e){this._todoNext=e}runTodoNext(){return n(this,void 0,void 0,function*(){this._todoNext&&(yield this._todoNext())})}}t.default=o},1126(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(4831));class i extends s.default{constructor(e=[]){super(e),super._buildIndex("id")}find(e,t=0){return super._find(e,t,"id")}current(e=0){return super.current(e)}}t.default=i},1381(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(4603));class o extends i.default{constructor(e,t){super(),this._reference=null,this._identifier=e.identifier,this._label=e.label,this._properties=e.properties,this._outgoing=e.outgoing,this._incoming=e.incoming,this._reference=t}get reference(){return this._reference}next(){return n(this,void 0,void 0,function*(){var e;this.setValue(this._reference.value()),yield null===(e=this._outgoing)||void 0===e?void 0:e.find(this._value.id),yield this.runTodoNext()})}find(e){return n(this,arguments,void 0,function*(e,t=0){var r,n;const s=null===(r=this._reference)||void 0===r?void 0:r.value();e===(null==s?void 0:s.id)&&(this.setValue(s),yield null===(n=this._outgoing)||void 0===n?void 0:n.find(this._value.id,t),yield this.runTodoNext())})}}t.default=o},1365(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(1542)),o=s(r(5346)),a=s(r(4603)),u=s(r(1381)),l=s(r(165)),c=s(r(4407));class h extends i.default{constructor(){super(...arguments),this._identifier=null,this._chain=[]}set identifier(e){this._identifier=e}get identifier(){return this._identifier}addElement(e){if(this._chain.length>0&&this._chain[this._chain.length-1].constructor===e.constructor)throw new Error("Cannot add two consecutive elements of the same type to the graph pattern");if(this._chain.length>0){const t=this._chain[this._chain.length-1];t instanceof a.default&&e instanceof l.default&&(t.outgoing=e,e.source=t),t instanceof l.default&&e instanceof a.default&&(t.target=e,e.incoming=t)}this._chain.push(e)}get chain(){return this._chain}get startNode(){if(0===this._chain.length)throw new Error("Pattern is empty");const e=this._chain[0];if(e instanceof a.default)return e;throw new Error("Pattern does not start with a node")}get endNode(){if(0===this._chain.length)throw new Error("Pattern is empty");const e=this._chain[this._chain.length-1];if(e instanceof a.default)return e;throw new Error("Pattern does not end with a node")}value(){return Array.from(this.values())}*values(){for(let e=0;e<this._chain.length;e++){const t=this._chain[e];if(t instanceof a.default){if(e>0&&this._chain[e-1]instanceof l.default&&0===this._chain[e-1].matches.length)continue;yield t.value()}else if(t instanceof l.default){let e=0;for(const r of t.matches)yield r,e<t.matches.length-1&&(yield r.endNode),e++}}}fetchData(){return n(this,void 0,void 0,function*(){const e=o.default.getInstance();for(const t of this._chain){if(t.constructor===u.default||t.constructor===c.default)continue;const r=yield e.getData(t);(t.constructor===a.default||t.constructor===l.default)&&t.setData(r)}})}}t.default=h},1982(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(1381)),o=s(r(1365));class a extends o.default{constructor(){super(...arguments),this._fetched=!1,this._evaluation=!1}set identifier(e){throw new Error("Cannot set identifier on PatternExpression")}addElement(e){super.addElement(e)}verify(){if(0===this._chain.length)throw new Error("PatternExpression must contain at least one element");if(!this._chain.some(e=>e instanceof i.default))throw new Error("PatternExpression must contain at least one NodeReference")}evaluate(){return n(this,void 0,void 0,function*(){this._evaluation=!1,this.endNode.todoNext=()=>n(this,void 0,void 0,function*(){this._evaluation=!0}),yield this.startNode.next()})}value(){return this._evaluation}fetchData(){const e=Object.create(null,{fetchData:{get:()=>super.fetchData}});return n(this,void 0,void 0,function*(){this._fetched||(yield e.fetchData.call(this),this._fetched=!0)})}}t.default=a},6572(e,t){var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e=[]){this._patterns=[],this._patterns=e}get patterns(){return this._patterns}initialize(){return r(this,void 0,void 0,function*(){let e=null;for(const t of this._patterns)yield t.fetchData(),null!==e&&(e.endNode.todoNext=()=>r(this,void 0,void 0,function*(){yield t.startNode.next()})),e=t})}set toDoNext(e){this._patterns.length>0&&(this._patterns[this._patterns.length-1].endNode.todoNext=e)}traverse(){return r(this,void 0,void 0,function*(){this._patterns.length>0&&(yield this._patterns[0].startNode.next())})}}},6025(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(7474)),o=s(r(4603));class a extends o.default{constructor(){super(...arguments),this._statement=null}set statement(e){this._statement=e}get statement(){return this._statement}data(){return n(this,void 0,void 0,function*(){if(null===this._statement)throw new Error("Statement is null");const e=new i.default(null,this._statement);return yield e.run(),e.results})}}t.default=a},6971(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(7474)),o=s(r(165));class a extends o.default{constructor(){super(...arguments),this._statement=null}set statement(e){this._statement=e}get statement(){return this._statement}data(){return n(this,void 0,void 0,function*(){if(null===this._statement)throw new Error("Statement is null");const e=new i.default(null,this._statement);return yield e.run(),e.results})}}t.default=a},165(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(1542)),o=s(r(8659)),a=s(r(6963));class u extends i.default{constructor(e=null,t=null){super(),this._identifier=null,this._types=[],this._properties=new Map,this._hops=new o.default,this._value=null,this._matches=new a.default,this._source=null,this._target=null,this._direction="right",this._data=null,this._identifier=e,null!==t&&(this._types=[t])}set identifier(e){this._identifier=e}get identifier(){return this._identifier}set type(e){this._types=[e]}get type(){return this._types.length>0?this._types[0]:null}set types(e){this._types=e}get types(){return this._types}get properties(){return this._properties}set properties(e){this._properties=e}_matchesProperties(e=0){const t=this._data;for(const[r,n]of this._properties){const s=t.current(e);if(null===s)throw new Error("No current relationship data available");if(!(r in s))throw new Error("Relationship does not have property");return s[r]===n.value()}return!0}setProperty(e,t){this._properties.set(e,t)}getProperty(e){return this._properties.get(e)||null}set hops(e){this._hops=e}get hops(){return this._hops}setValue(e,t=""){this._matches.push(e,t),this._value=this._matches.value()}set source(e){this._source=e}get source(){return this._source}set target(e){this._target=e}get target(){return this._target}set direction(e){this._direction=e}get direction(){return this._direction}value(){return this._value}get matches(){return this._matches.matches}setData(e){this._data=e}getData(){return this._data}setEndNode(e){this._matches.endNode=e}_left_id_or_right_id(){return"left"===this._direction?"left_id":"right_id"}find(e){return n(this,arguments,void 0,function*(e,t=0){var r,n,s,i;const o=this._source;for(t>0&&(this._source=this._target),0===t&&(null===(r=this._data)||void 0===r||r.reset(),(null===(n=this.hops)||void 0===n?void 0:n.multi())&&0===this.hops.min&&this._target&&(yield this._target.find(e,t)));this._data.find(e,t,this._direction);){const r=(null===(s=this._data)||void 0===s?void 0:s.current(t))[this._left_id_or_right_id()];if(t+1>=this.hops.min){if(this.setValue(this,e),!this._matchesProperties(t))continue;if(yield null===(i=this._target)||void 0===i?void 0:i.find(r,t),t+1<this.hops.max){if(this._matches.isCircular(r)){this._matches.pop();continue}yield this.find(r,t+1)}this._matches.pop()}else yield this.find(r,t+1)}this._source=o})}}t.default=u},3784(e,t,r){var n=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(4831));class o extends i.default{constructor(e=[]){super(e),super._buildIndex("left_id"),super._buildIndex("right_id")}find(e,t=0,r="right"){return super._find(e,t,"left"===r?"right_id":"left_id")}properties(){const e=this.current();if(e){const{left_id:t,right_id:r,_type:s}=e;return n(e,["left_id","right_id","_type"])}return null}current(e=0){return super.current(e)}}t.default=o},6963(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this._matches=[],this._nodeIds=[]}push(e,t){var r;const n=e.getData(),s=null==n?void 0:n.current(),i={type:s&&"_type"in s?s._type:e.type,startNode:(null===(r=e.source)||void 0===r?void 0:r.value())||{},endNode:null,properties:null==n?void 0:n.properties()};return this._matches.push(i),this._nodeIds.push(t),i}set endNode(e){this._matches.length>0&&(this._matches[this._matches.length-1].endNode=e.value())}pop(){return this._nodeIds.pop(),this._matches.pop()}value(){return 0===this._matches.length?null:1===this._matches.length?this._matches[0]:this._matches}get matches(){return this._matches}isCircular(e){return this._nodeIds.includes(e)}}},4407(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(165));class o extends i.default{constructor(e,t){super(),this._reference=null,this._identifier=e.identifier,this._types=e.types,this._hops=e.hops,this._source=e.source,this._target=e.target,this._reference=t}find(e){return n(this,arguments,void 0,function*(e,t=0){var r,n;this.setValue(this._reference);const s=null===(r=this._reference.getData())||void 0===r?void 0:r.current(t),i="left"===this._direction?"left_id":"right_id";yield null===(n=this._target)||void 0===n?void 0:n.find(s[i],t)})}}t.default=o},610(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(6090)),i=n(r(5517)),o=n(r(2312));s.default.listFunctions=function(e){return o.default.listFunctions(e)},s.default.getFunctionMetadata=function(e){return o.default.getMetadata(e)},s.default.Function=i.default,t.default=s.default},5859(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(1542));class i extends s.default{constructor(e){super(),this.alias=e}toString(){return`Alias (${this.alias})`}getAlias(){return this.alias}value(){return this.alias}}t.default=i},4275(e,t){var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AliasOption=void 0,function(e){e[e.NOT_ALLOWED=0]="NOT_ALLOWED",e[e.OPTIONAL=1]="OPTIONAL",e[e.REQUIRED=2]="REQUIRED"}(r||(t.AliasOption=r={}))},1542(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this._parent=null,this.children=[]}addChild(e){e._parent=this,this.children.push(e)}firstChild(){if(0===this.children.length)throw new Error("Expected child");return this.children[0]}lastChild(){if(0===this.children.length)throw new Error("Expected child");return this.children[this.children.length-1]}getChildren(){return this.children}childCount(){return this.children.length}value(){return null}isOperator(){return!1}isOperand(){return!this.isOperator()}get precedence(){return 0}get leftAssociative(){return!1}print(){return Array.from(this._print(0)).join("\n")}*_print(e){0===e?yield this.constructor.name:e>0&&(yield"-".repeat(e)+` ${this.toString()}`);for(const t of this.children)yield*t._print(e+1)}toString(){return this.constructor.name}}},3738(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(7847)),i=n(r(3479));t.default=class{constructor(e=null){this.tokens=[],this.tokenIndex=0,null!==e&&(this.tokens=e)}tokenize(e){this.tokens=new i.default(e).tokenize(),this.tokenIndex=0}setNextToken(){this.tokenIndex++}peek(){return this.tokenIndex+1>=this.tokens.length?null:this.tokens[this.tokenIndex+1]}ahead(e,t=!0){let r=0;for(let n=this.tokenIndex;n<this.tokens.length;n++)if(!t||!this.tokens[n].isWhitespaceOrComment()){if(!this.tokens[n].equals(e[r]))return!1;if(r++,r===e.length)break}return r===e.length}get token(){return this.tokenIndex>=this.tokens.length?s.default.EOF:this.tokens[this.tokenIndex]}get previousToken(){return this.tokenIndex-1<0?s.default.EOF:this.tokens[this.tokenIndex-1]}}},3840(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(1542));class i extends s.default{constructor(){super()}}t.default=i},970(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(1542));class i extends s.default{constructor(){super()}value(){return this.children[0].value()}}t.default=i},9798(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(1542));class i extends s.default{constructor(){super()}value(){return this.firstChild().value()||{}}}t.default=i},5956(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(1542));class i extends s.default{constructor(){super()}}t.default=i},8587(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(1542));class i extends s.default{constructor(){super()}}t.default=i},440(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(1542));class i extends s.default{constructor(){super()}}t.default=i},2457(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(1542));class i extends s.default{constructor(){super()}}t.default=i},9056(e,t){Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this.nodes=[]}push(e){this.nodes.push(e)}pop(){return this.nodes.pop()}containsType(e){return this.nodes.some(t=>t instanceof e)}clone(){const e=new r;return e.nodes=[...this.nodes],e}}t.default=r},122(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(1542));class i extends s.default{addKeyValue(e){this.addChild(e)}toString(){return"AssociativeArray"}*_value(){for(const e of this.children){const t=e;yield{[t.key]:t._value}}}value(){return Object.assign({},...this._value())}}t.default=i},1363(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(1542));class i extends s.default{addValue(e){this.addChild(e)}value(){return this.children.map(e=>e.value())}}t.default=i},2073(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(1542)),i=n(r(3198));class o extends s.default{constructor(e,t){super(),this.addChild(new i.default(e)),this.addChild(t)}get key(){return this.children[0].value()}get _value(){return this.children[1].value()}toString(){return"KeyValuePair"}}t.default=o},9997(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(1542));class i extends s.default{constructor(){super()}set index(e){this.addChild(e)}get index(){return this.children[0]}set variable(e){this.addChild(e)}get variable(){return this.children[1]}isOperand(){return!0}value(){const e=this.variable.value();return null==e?null:e[this.index.value()]}}t.default=i},3399(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(1542));class i extends s.default{constructor(){super()}set from(e){this.addChild(e)}get from(){return this.children[0]}set to(e){this.addChild(e)}get to(){return this.children[1]}set variable(e){this.addChild(e)}get variable(){return this.children[2]}isOperand(){return!0}value(){const e=this.variable.value(),t=this.from.value()||0,r=this.to.value()||e.length;return this.variable.value().slice(t,r)}}t.default=i},3271(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(1542));class i extends s.default{constructor(e){super();const t=e.toUpperCase();if("TRUE"===t)this._value=!0;else{if("FALSE"!==t)throw new Error(`Invalid boolean value: ${e}`);this._value=!1}}value(){return this._value}}t.default=i},3573(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(1982)),i=n(r(1542)),o=n(r(5481)),a=n(r(2730));class u extends i.default{constructor(){super(...arguments),this.operators=[],this.output=[],this._alias=null,this._overridden=null,this._reducers=null,this._patterns=null}addNode(e){if(e.isOperand())this.output.push(e);else if(e.isOperator()){const t=e;for(;this.operators.length>0;){let e=this.operators[this.operators.length-1];if(!(e.precedence>t.precedence||e.precedence===t.precedence&&t.leftAssociative))break;this.output.push(e),this.operators.pop()}this.operators.push(t)}}finish(){let e;for(;e=this.operators.pop();)this.output.push(e);this.addChild(this.toTree())}toTree(){const e=this.output.pop()||new i.default;if(e.isOperator()){const t=this.toTree(),r=this.toTree();e.addChild(r),e.addChild(t)}return e}nodesAdded(){return this.operators.length>0||this.output.length>0}value(){if(null!==this._overridden)return this._overridden;if(1!==this.childCount())throw new Error("Expected one child");return this.children[0].value()}setAlias(e){this._alias=e}set alias(e){this._alias=e}get alias(){return this.firstChild()instanceof a.default&&null===this._alias?this.firstChild().identifier:this._alias}toString(){return null!==this._alias?`Expression (${this._alias})`:"Expression"}reducers(){return null===this._reducers&&(this._reducers=[...this._extract(this,o.default)]),this._reducers}patterns(){return null===this._patterns&&(this._patterns=[...this._extract(this,s.default)]),this._patterns}*_extract(e=this,t){e instanceof t&&(yield e);for(const r of e.getChildren())yield*this._extract(r,t)}mappable(){return 0===this.reducers().length}has_reducers(){return this.reducers().length>0}set overridden(e){this._overridden=e}}t.default=u},4484(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this._map=new Map}get(e){return this._map.get(e)}has(e){return this._map.has(e)}set map(e){this._map.clear();for(const t of e)null!=t.alias&&this._map.set(t.alias,t)}}},1153(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(1542));class i extends s.default{value(){return this.getChildren().map(e=>e.value()).join("")}}t.default=i},5196(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(3198));class i extends s.default{toString(){return`Identifier (${this._value})`}value(){return super.value()}}t.default=i},3818(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(1542));class i extends s.default{constructor(e){super(),-1!==e.indexOf(".")?this._value=parseFloat(e):this._value=parseInt(e)}value(){return this._value}toString(){return`${this.constructor.name} (${this._value})`}}t.default=i},4783(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.NotEndsWith=t.EndsWith=t.NotStartsWith=t.StartsWith=t.NotContains=t.Contains=t.NotIn=t.In=t.IsNot=t.Is=t.Not=t.Or=t.And=t.LessThanOrEqual=t.GreaterThanOrEqual=t.LessThan=t.GreaterThan=t.NotEquals=t.Equals=t.Power=t.Modulo=t.Divide=t.Multiply=t.Subtract=t.Add=t.Operator=void 0,t.deepEquals=i;const s=n(r(1542));function i(e,t){if(e===t)return!0;if(null===e||null===t||void 0===e||void 0===t)return!1;if(typeof e!=typeof t)return!1;if("object"!=typeof e)return!1;if(Array.isArray(e)!==Array.isArray(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1;return!0}const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const n of r){if(!Object.prototype.hasOwnProperty.call(t,n))return!1;if(!i(e[n],t[n]))return!1}return!0}class o extends s.default{constructor(e,t){super(),this._precedence=0,this._leftAssociative=!0,this._precedence=e,this._leftAssociative=t}isOperator(){return!0}get precedence(){return this._precedence}get leftAssociative(){return this._leftAssociative}get lhs(){return this.getChildren()[0]}get rhs(){return this.getChildren()[1]}}t.Operator=o,t.Add=class extends o{constructor(){super(1,!0)}value(){const e=this.lhs.value(),t=this.rhs.value();return Array.isArray(e)&&Array.isArray(t)?[...e,...t]:e+t}},t.Subtract=class extends o{constructor(){super(1,!0)}value(){return this.lhs.value()-this.rhs.value()}},t.Multiply=class extends o{constructor(){super(2,!0)}value(){return this.lhs.value()*this.rhs.value()}},t.Divide=class extends o{constructor(){super(2,!0)}value(){return this.lhs.value()/this.rhs.value()}},t.Modulo=class extends o{constructor(){super(2,!0)}value(){return this.lhs.value()%this.rhs.value()}},t.Power=class extends o{constructor(){super(3,!1)}value(){return Math.pow(this.lhs.value(),this.rhs.value())}},t.Equals=class extends o{constructor(){super(0,!0)}value(){return i(this.lhs.value(),this.rhs.value())?1:0}},t.NotEquals=class extends o{constructor(){super(0,!0)}value(){return i(this.lhs.value(),this.rhs.value())?0:1}},t.GreaterThan=class extends o{constructor(){super(0,!0)}value(){return this.lhs.value()>this.rhs.value()?1:0}},t.LessThan=class extends o{constructor(){super(0,!0)}value(){return this.lhs.value()<this.rhs.value()?1:0}},t.GreaterThanOrEqual=class extends o{constructor(){super(0,!0)}value(){return this.lhs.value()>=this.rhs.value()?1:0}},t.LessThanOrEqual=class extends o{constructor(){super(0,!0)}value(){return this.lhs.value()<=this.rhs.value()?1:0}},t.And=class extends o{constructor(){super(-1,!0)}value(){return this.lhs.value()&&this.rhs.value()?1:0}},t.Or=class extends o{constructor(){super(-1,!0)}value(){return this.lhs.value()||this.rhs.value()?1:0}},t.Not=class extends o{constructor(){super(0,!0)}isOperator(){return!1}value(){return this.lhs.value()?0:1}},t.Is=class extends o{constructor(){super(-1,!0)}value(){return this.lhs.value()==this.rhs.value()?1:0}},t.IsNot=class extends o{constructor(){super(-1,!0)}value(){return this.lhs.value()!=this.rhs.value()?1:0}},t.In=class extends o{constructor(){super(-1,!0)}value(){const e=this.rhs.value();if(!Array.isArray(e))throw new Error("Right operand of IN must be a list");return e.includes(this.lhs.value())?1:0}},t.NotIn=class extends o{constructor(){super(-1,!0)}value(){const e=this.rhs.value();if(!Array.isArray(e))throw new Error("Right operand of NOT IN must be a list");return e.includes(this.lhs.value())?0:1}},t.Contains=class extends o{constructor(){super(0,!0)}value(){const e=this.lhs.value(),t=this.rhs.value();if("string"!=typeof e||"string"!=typeof t)throw new Error("CONTAINS requires string operands");return e.includes(t)?1:0}},t.NotContains=class extends o{constructor(){super(0,!0)}value(){const e=this.lhs.value(),t=this.rhs.value();if("string"!=typeof e||"string"!=typeof t)throw new Error("NOT CONTAINS requires string operands");return e.includes(t)?0:1}},t.StartsWith=class extends o{constructor(){super(0,!0)}value(){const e=this.lhs.value(),t=this.rhs.value();if("string"!=typeof e||"string"!=typeof t)throw new Error("STARTS WITH requires string operands");return e.startsWith(t)?1:0}},t.NotStartsWith=class extends o{constructor(){super(0,!0)}value(){const e=this.lhs.value(),t=this.rhs.value();if("string"!=typeof e||"string"!=typeof t)throw new Error("NOT STARTS WITH requires string operands");return e.startsWith(t)?0:1}},t.EndsWith=class extends o{constructor(){super(0,!0)}value(){const e=this.lhs.value(),t=this.rhs.value();if("string"!=typeof e||"string"!=typeof t)throw new Error("ENDS WITH requires string operands");return e.endsWith(t)?1:0}},t.NotEndsWith=class extends o{constructor(){super(0,!0)}value(){const e=this.lhs.value(),t=this.rhs.value();if("string"!=typeof e||"string"!=typeof t)throw new Error("NOT ENDS WITH requires string operands");return e.endsWith(t)?0:1}}},2730(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(5196));class i extends s.default{constructor(e,t=void 0){super(e),this._referred=void 0,this._referred=t}get referred(){return this._referred}set referred(e){this._referred=e}toString(){return`Reference (${this._value})`}value(){var e;return null===(e=this._referred)||void 0===e?void 0:e.value()}get identifier(){return this._value}}t.default=i},3198(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(1542));class i extends s.default{constructor(e){super(),this._value=e}value(){return this._value}toString(){return`String (${this._value})`}}t.default=i},5481(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(5517));class i extends s.default{constructor(e){super(e),this._overridden=null}reduce(e){throw new Error("Method not implemented.")}element(){throw new Error("Method not implemented.")}get overridden(){return this._overridden}set overridden(e){this._overridden=e}value(){return this._overridden}}t.default=i},3680(e,t,r){var n=this&&this.__await||function(e){return this instanceof n?(this.v=e,this):new n(e)},s=this&&this.__asyncGenerator||function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,i=r.apply(e,t||[]),o=[];return s=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),s[Symbol.asyncIterator]=function(){return this},s;function a(e,t){i[e]&&(s[e]=function(t){return new Promise(function(r,n){o.push([e,t,r,n])>1||u(e,t)})},t&&(s[e]=t(s[e])))}function u(e,t){try{(r=i[e](t)).value instanceof n?Promise.resolve(r.value.v).then(l,c):h(o[0][2],r)}catch(e){h(o[0][3],e)}var r}function l(e){u("next",e)}function c(e){u("throw",e)}function h(e,t){e(t),o.shift(),o.length&&u(o[0][0],o[0][1])}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(r(5517));class a extends o.default{set parameters(e){this.children=e}getArguments(){return this.children.map(e=>e.value())}generate(...e){return s(this,arguments,function*(){throw new Error("Not implemented: generate method must be overridden in subclasses.")})}}t.default=a},8437(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5481)),o=s(r(1206)),a=r(3437);class u extends o.default{constructor(){super(...arguments),this._count=0,this._sum=null}get value(){return null===this._sum?null:this._sum/this._count}set value(e){this._count+=1,null!==this._sum?this._sum+=e:this._sum=e}}let l=class extends i.default{constructor(){super("avg"),this._expectedParameterCount=1}reduce(e){e.value=this.firstChild().value()}element(){return new u}};l=n([(0,a.FunctionDef)({description:"Calculates the average of numeric values across grouped rows",category:"aggregate",parameters:[{name:"value",description:"Numeric value to average",type:"number"}],output:{description:"Average of all values",type:"number",example:50},examples:["WITH [10, 20, 30] AS nums UNWIND nums AS n RETURN avg(n)"]})],l),t.default=l},3382(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=r(3437);let a=class extends i.default{constructor(){super("coalesce"),this._expectedParameterCount=null}value(){const e=this.getChildren();if(0===e.length)throw new Error("coalesce() requires at least one argument");for(const t of e){const e=t.value();if(null!=e)return e}return null}};a=n([(0,o.FunctionDef)({description:"Returns the first non-null value from a list of expressions",category:"scalar",parameters:[{name:"expressions",description:"Two or more expressions to evaluate",type:"any"}],output:{description:"The first non-null value, or null if all values are null",type:"any"},examples:["RETURN coalesce(null, 'hello', 'world')","MATCH (n) RETURN coalesce(n.nickname, n.name) AS displayName"]})],a),t.default=a},1567(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5481)),o=s(r(1206)),a=r(3437);class u extends o.default{constructor(){super(...arguments),this._value=[]}get value(){return this._value}set value(e){this._value.push(e)}}class l extends o.default{constructor(){super(...arguments),this._value=new Map}get value(){return Array.from(this._value.values())}set value(e){const t=JSON.stringify(e);this._value.has(t)||this._value.set(t,e)}}let c=class extends i.default{constructor(){super("collect"),this._distinct=!1,this._expectedParameterCount=1}reduce(e){e.value=this.firstChild().value()}element(){return this._distinct?new l:new u}set distinct(e){this._distinct=e}};c=n([(0,a.FunctionDef)({description:"Collects values into an array across grouped rows",category:"aggregate",parameters:[{name:"value",description:"Value to collect",type:"any"}],output:{description:"Array of collected values",type:"array",example:[1,2,3]},examples:["WITH [1, 2, 3] AS nums UNWIND nums AS n RETURN collect(n)"]})],c),t.default=c},3618(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5481)),o=r(3437),a=s(r(1206));class u extends a.default{constructor(){super(...arguments),this._value=0}get value(){return this._value}set value(e){this._value+=1}}class l extends a.default{constructor(){super(...arguments),this._seen=new Set}get value(){return this._seen.size}set value(e){const t=JSON.stringify(e);this._seen.add(t)}}let c=class extends i.default{constructor(){super("count"),this._distinct=!1,this._expectedParameterCount=1,this._supports_distinct=!0}reduce(e){e.value=this.firstChild().value()}element(){return this._distinct?new l:new u}set distinct(e){this._distinct=e}};c=n([(0,o.FunctionDef)({description:"Counts the number of values across grouped rows",category:"aggregate",parameters:[{name:"value",description:"Value to count",type:"any"}],output:{description:"Number of values",type:"number",example:3},examples:["WITH [1, 2, 3] AS nums UNWIND nums AS n RETURN count(n)","WITH [1, 2, 2, 3] AS nums UNWIND nums AS n RETURN count(distinct n)"]})],c),t.default=c},337(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=r(3437),a=r(2718);let u=class extends i.default{constructor(){super("date"),this._expectedParameterCount=null}value(){const e=this.getChildren();if(e.length>1)throw new Error("date() accepts at most one argument");const t=1===e.length?(0,a.parseTemporalArg)(e[0].value(),"date"):new Date;return(0,a.buildDateObject)(t)}};u=n([(0,o.FunctionDef)({description:"Returns a date value. With no arguments returns the current date. Accepts an ISO 8601 date string or a map of components (year, month, day).",category:"scalar",parameters:[{name:"input",description:"Optional. An ISO 8601 date string (YYYY-MM-DD) or a map of components.",type:"string",required:!1}],output:{description:"A date object with properties: year, month, day, epochMillis, dayOfWeek, dayOfYear, quarter, formatted",type:"object"},examples:["RETURN date() AS today","RETURN date('2025-06-15') AS d","RETURN date({year: 2025, month: 6, day: 15}) AS d","WITH date() AS d RETURN d.year, d.month, d.dayOfWeek"]})],u),t.default=u},3632(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=r(3437),a=r(2718);let u=class extends i.default{constructor(){super("datetime"),this._expectedParameterCount=null}value(){const e=this.getChildren();if(e.length>1)throw new Error("datetime() accepts at most one argument");const t=1===e.length?(0,a.parseTemporalArg)(e[0].value(),"datetime"):new Date;return(0,a.buildDatetimeObject)(t,!0)}};u=n([(0,o.FunctionDef)({description:"Returns a datetime value. With no arguments returns the current UTC datetime. Accepts an ISO 8601 string or a map of components (year, month, day, hour, minute, second, millisecond).",category:"scalar",parameters:[{name:"input",description:"Optional. An ISO 8601 datetime string or a map of components.",type:"string",required:!1}],output:{description:"A datetime object with properties: year, month, day, hour, minute, second, millisecond, epochMillis, epochSeconds, dayOfWeek, dayOfYear, quarter, formatted",type:"object"},examples:["RETURN datetime() AS now","RETURN datetime('2025-06-15T12:30:00Z') AS dt","RETURN datetime({year: 2025, month: 6, day: 15, hour: 12}) AS dt","WITH datetime() AS dt RETURN dt.year, dt.month, dt.day"]})],u),t.default=u},301(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=r(3437),a=/^P(?:(\d+(?:\.\d+)?)Y)?(?:(\d+(?:\.\d+)?)M)?(?:(\d+(?:\.\d+)?)W)?(?:(\d+(?:\.\d+)?)D)?(?:T(?:(\d+(?:\.\d+)?)H)?(?:(\d+(?:\.\d+)?)M)?(?:(\d+(?:\.\d+)?)S)?)?$/;function u(e){const t=e.years||0,r=e.months||0,n=e.weeks||0,s=e.days||0,i=e.hours||0,o=e.minutes||0,a=Math.floor(e.seconds||0),u=(e.seconds||0)-a,l=e.milliseconds?Math.floor(e.milliseconds):Math.round(1e3*u),c=e.nanoseconds?Math.floor(e.nanoseconds):Math.round(1e9*u)%1e6,h=s+7*n,d=3600*i+60*o+a,f=12*t+r;let p="P";return t&&(p+=`${t}Y`),r&&(p+=`${r}M`),n&&(p+=`${n}W`),h-7*n&&(p+=h-7*n+"D"),(i||o||a||l)&&(p+="T",i&&(p+=`${i}H`),o&&(p+=`${o}M`),(a||l)&&(p+=l?`${a}.${String(l).padStart(3,"0")}S`:`${a}S`)),"P"===p&&(p="PT0S"),{years:t,months:r,weeks:n,days:h,hours:i,minutes:o,seconds:a,milliseconds:l,nanoseconds:c,totalMonths:f,totalDays:h,totalSeconds:d,formatted:p}}let l=class extends i.default{constructor(){super("duration"),this._expectedParameterCount=1}value(){const e=this.getChildren()[0].value();if(null==e)return null;if("string"==typeof e)return u(function(e){const t=e.match(a);if(!t)throw new Error(`duration(): Invalid ISO 8601 duration string: '${e}'`);return{years:t[1]?parseFloat(t[1]):0,months:t[2]?parseFloat(t[2]):0,weeks:t[3]?parseFloat(t[3]):0,days:t[4]?parseFloat(t[4]):0,hours:t[5]?parseFloat(t[5]):0,minutes:t[6]?parseFloat(t[6]):0,seconds:t[7]?parseFloat(t[7]):0}}(e));if("object"==typeof e&&!Array.isArray(e))return u(e);throw new Error("duration() expects a string or map argument")}};l=n([(0,o.FunctionDef)({description:"Creates a duration value representing a span of time. Accepts an ISO 8601 duration string (e.g., 'P1Y2M3DT4H5M6S') or a map of components (years, months, weeks, days, hours, minutes, seconds, milliseconds, nanoseconds).",category:"scalar",parameters:[{name:"input",description:"An ISO 8601 duration string or a map of components (years, months, weeks, days, hours, minutes, seconds, milliseconds, nanoseconds)",type:"any"}],output:{description:"A duration object with properties: years, months, weeks, days, hours, minutes, seconds, milliseconds, nanoseconds, totalMonths, totalDays, totalSeconds, formatted",type:"object"},examples:["RETURN duration('P1Y2M3D') AS d","RETURN duration('PT2H30M') AS d","RETURN duration({days: 14, hours: 16}) AS d","RETURN duration({months: 5, days: 1, hours: 12}) AS d"]})],l),t.default=l},3805(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=r(3437);let a=class extends i.default{constructor(){super("elementid"),this._expectedParameterCount=1}value(){const e=this.getChildren()[0].value();if(null==e)return null;if("object"!=typeof e||Array.isArray(e))throw new Error("elementId() expects a node or relationship");if("type"in e&&"startNode"in e&&"endNode"in e&&"properties"in e)return String(e.type);if("id"in e)return String(e.id);throw new Error("elementId() expects a node or relationship")}};a=n([(0,o.FunctionDef)({description:"Returns the element id of a node or relationship as a string. For nodes, returns the string representation of the id property. For relationships, returns the type.",category:"scalar",parameters:[{name:"entity",description:"A node or relationship to get the element id from",type:"object"}],output:{description:"The element id of the entity as a string",type:"string",example:'"1"'},examples:["MATCH (n:Person) RETURN elementId(n)","MATCH (a)-[r]->(b) RETURN elementId(r)"]})],a),t.default=a},5517(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(1542));class i extends s.default{constructor(e){super(),this._expectedParameterCount=null,this._supports_distinct=!1,this._name=e||this.constructor.name}set parameters(e){if(null!==this._expectedParameterCount&&this._expectedParameterCount!==e.length)throw new Error(`Function ${this._name} expected ${this._expectedParameterCount} parameters, but got ${e.length}`);this.children=e}get name(){return this._name}toString(){return`Function (${this._name})`}set distinct(e){if(!this._supports_distinct)throw new Error(`Function ${this._name} does not support distinct`);this._supports_distinct=e}}t.default=i},2312(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),r(8437),r(3382),r(1567),r(3618),r(337),r(3632),r(301),r(3805);const n=r(3437);r(5940),r(1439),r(7840),r(197),r(1009),r(5797),r(2843),r(2551),r(6059),r(8406),r(2480),r(2912),r(3920),r(7514),r(8240),r(3746),r(2061),r(3605),r(9574),r(9700),r(6781),r(3628),r(3700),r(9854),r(9391),r(8140),r(5445),r(909),r(1793),r(8673),r(898),r(1278),r(6609),r(8749);class s{static getAsyncProvider(e){return(0,n.getRegisteredFunctionFactory)(e.toLowerCase())}static isAsyncProvider(e){return void 0!==(0,n.getRegisteredFunctionFactory)(e.toLowerCase(),"async")}static getMetadata(e){return(0,n.getFunctionMetadata)(e.toLowerCase())}static listFunctions(e){const t=[];for(const r of(0,n.getRegisteredFunctionMetadata)())(null==e?void 0:e.category)&&r.category!==e.category||(null==e?void 0:e.asyncOnly)&&"async"!==r.category||(null==e?void 0:e.syncOnly)&&"async"===r.category||t.push(r);return t}static listFunctionNames(){return(0,n.getRegisteredFunctionMetadata)().map(e=>e.name)}static toJSON(){const e=s.listFunctions(),t=[...new Set(e.map(e=>e.category).filter(Boolean))];return{functions:e,categories:t}}static create(e){const t=e.toLowerCase(),r=(0,n.getRegisteredFunctionFactory)(t);if(r)return r();throw new Error(`Unknown function: ${e}`)}static createPredicate(e){const t=e.toLowerCase(),r=(0,n.getRegisteredFunctionFactory)(t,"predicate");if(r)return r();throw new Error(`Unknown predicate function: ${e}`)}static createAsync(e){const t=e.toLowerCase(),r=(0,n.getRegisteredFunctionFactory)(t,"async");if(r)return r();throw new Error(`Unknown async function: ${e}`)}}t.default=s},3437(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionDef=function(e){return function(t){return r.register(t,e),t}},t.getRegisteredFunctionMetadata=function(){return r.getAllMetadata()},t.getRegisteredFunctionFactory=function(e,t){return r.getFactory(e,t)},t.getFunctionMetadata=function(e,t){return r.getMetadata(e,t)};class r{static register(e,t){var r;const n=(null===(r=(new e).name)||void 0===r?void 0:r.toLowerCase())||e.name.toLowerCase(),s=t.category?`${n}:${t.category}`:n;this.metadata.set(s,Object.assign({name:n},t)),"predicate"!==t.category&&this.factories.set(n,()=>new e),this.factories.set(s,()=>new e)}static getAllMetadata(){return Array.from(this.metadata.values())}static getMetadata(e,t){const r=e.toLowerCase();if(t)return this.metadata.get(`${r}:${t}`);for(const e of this.metadata.values())if(e.name.toLowerCase()===r)return e}static getFactory(e,t){const r=e.toLowerCase();return t?this.factories.get(`${r}:${t}`):this.factories.get(r)}}r.metadata=new Map,r.factories=new Map},5940(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=s(r(2312)),a=r(3437);let u=class extends i.default{constructor(){super("functions"),this._expectedParameterCount=null}value(){const e=this.getChildren();if(0===e.length)return o.default.listFunctions();if(1===e.length){const t=e[0].value();if("string"==typeof t)return o.default.listFunctions({category:t});throw new Error("functions() category parameter must be a string")}throw new Error("functions() takes 0 or 1 parameters")}};u=n([(0,a.FunctionDef)({description:"Lists all registered functions with their metadata. Useful for discovering available functions and their documentation. Results include name, description, parameters, output schema, and usage examples.",category:"scalar",parameters:[{name:"category",description:"Optional category to filter by (e.g., 'aggregation', 'string', 'math')",type:"string",required:!1}],output:{description:"Array of function metadata objects",type:"array",items:{type:"object",properties:{name:{description:"Function name",type:"string"},description:{description:"What the function does",type:"string"},category:{description:"Function category",type:"string"},parameters:{description:"Array of parameter definitions",type:"array"},output:{description:"Output schema",type:"object"},examples:{description:"Usage examples",type:"array"}}}},examples:["WITH functions() AS funcs RETURN funcs","WITH functions('aggregation') AS funcs UNWIND funcs AS f RETURN f.name, f.description"]})],u),t.default=u},1439(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=r(3437);let a=class extends i.default{constructor(){super("head"),this._expectedParameterCount=1}value(){const e=this.getChildren()[0].value();if(null==e)return null;if(!Array.isArray(e))throw new Error("head() expects a list");return 0===e.length?null:e[0]}};a=n([(0,o.FunctionDef)({description:"Returns the first element of a list",category:"scalar",parameters:[{name:"list",description:"The list to get the first element from",type:"array"}],output:{description:"The first element of the list",type:"any",example:"1"},examples:["RETURN head([1, 2, 3])","WITH ['a', 'b', 'c'] AS items RETURN head(items)"]})],a),t.default=a},7840(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=r(3437);let a=class extends i.default{constructor(){super("id"),this._expectedParameterCount=1}value(){const e=this.getChildren()[0].value();if(null==e)return null;if("object"!=typeof e||Array.isArray(e))throw new Error("id() expects a node or relationship");if("type"in e&&"startNode"in e&&"endNode"in e&&"properties"in e)return e.type;if("id"in e)return e.id;throw new Error("id() expects a node or relationship")}};a=n([(0,o.FunctionDef)({description:"Returns the id of a node or relationship. For nodes, returns the id property. For relationships, returns the type.",category:"scalar",parameters:[{name:"entity",description:"A node or relationship to get the id from",type:"object"}],output:{description:"The id of the entity",type:"any",example:"1"},examples:["MATCH (n:Person) RETURN id(n)","MATCH (a)-[r]->(b) RETURN id(r)"]})],a),t.default=a},197(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=s(r(3198)),a=r(3437);let u=class extends i.default{constructor(){super("join"),this._expectedParameterCount=2}set parameters(e){1===e.length&&e.push(new o.default("")),super.parameters=e}value(){const e=this.getChildren()[0].value(),t=this.getChildren()[1].value();if(!Array.isArray(e)||"string"!=typeof t)throw new Error("Invalid arguments for join function");return e.join(t)}};u=n([(0,a.FunctionDef)({description:"Joins an array of strings with a delimiter",category:"scalar",parameters:[{name:"array",description:"Array of values to join",type:"array"},{name:"delimiter",description:"Delimiter to join with",type:"string"}],output:{description:"Joined string",type:"string",example:"a,b,c"},examples:["WITH ['a', 'b', 'c'] AS arr RETURN join(arr, ',')"]})],u),t.default=u},1009(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=r(3437);let a=class extends i.default{constructor(){super("keys"),this._expectedParameterCount=1}value(){const e=this.getChildren()[0].value();if(null==e)return[];if("object"!=typeof e||Array.isArray(e))throw new Error("keys() expects an object, not an array or primitive");return Object.keys(e)}};a=n([(0,o.FunctionDef)({description:"Returns the keys of an object (associative array) as an array",category:"scalar",parameters:[{name:"object",description:"Object to extract keys from",type:"object"}],output:{description:"Array of keys",type:"array",example:"['name', 'age']"},examples:["WITH { name: 'Alice', age: 30 } AS obj RETURN keys(obj)"]})],a),t.default=a},5797(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=r(3437);let a=class extends i.default{constructor(){super("last"),this._expectedParameterCount=1}value(){const e=this.getChildren()[0].value();if(null==e)return null;if(!Array.isArray(e))throw new Error("last() expects a list");return 0===e.length?null:e[e.length-1]}};a=n([(0,o.FunctionDef)({description:"Returns the last element of a list",category:"scalar",parameters:[{name:"list",description:"The list to get the last element from",type:"array"}],output:{description:"The last element of the list",type:"any",example:"3"},examples:["RETURN last([1, 2, 3])","WITH ['a', 'b', 'c'] AS items RETURN last(items)"]})],a),t.default=a},2843(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=r(3437),a=r(2718);let u=class extends i.default{constructor(){super("localdatetime"),this._expectedParameterCount=null}value(){const e=this.getChildren();if(e.length>1)throw new Error("localdatetime() accepts at most one argument");const t=1===e.length?(0,a.parseTemporalArg)(e[0].value(),"localdatetime"):new Date;return(0,a.buildDatetimeObject)(t,!1)}};u=n([(0,o.FunctionDef)({description:"Returns a local datetime value (no timezone). With no arguments returns the current local datetime. Accepts an ISO 8601 string or a map of components.",category:"scalar",parameters:[{name:"input",description:"Optional. An ISO 8601 datetime string or a map of components.",type:"string",required:!1}],output:{description:"A datetime object with properties: year, month, day, hour, minute, second, millisecond, epochMillis, epochSeconds, dayOfWeek, dayOfYear, quarter, formatted",type:"object"},examples:["RETURN localdatetime() AS now","RETURN localdatetime('2025-06-15T12:30:00') AS dt","WITH localdatetime() AS dt RETURN dt.hour, dt.minute"]})],u),t.default=u},2551(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=r(3437),a=r(2718);let u=class extends i.default{constructor(){super("localtime"),this._expectedParameterCount=null}value(){const e=this.getChildren();if(e.length>1)throw new Error("localtime() accepts at most one argument");const t=1===e.length?(0,a.parseTemporalArg)(e[0].value(),"localtime"):new Date;return(0,a.buildTimeObject)(t,!1)}};u=n([(0,o.FunctionDef)({description:"Returns a local time value (no timezone). With no arguments returns the current local time. Accepts an ISO 8601 time string or a map of components.",category:"scalar",parameters:[{name:"input",description:"Optional. An ISO 8601 time string (HH:MM:SS) or a map of components.",type:"string",required:!1}],output:{description:"A time object with properties: hour, minute, second, millisecond, formatted",type:"object"},examples:["RETURN localtime() AS now","RETURN localtime('14:30:00') AS t","WITH localtime() AS t RETURN t.hour, t.minute"]})],u),t.default=u},6059(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5481)),o=r(3437),a=s(r(1206));class u extends a.default{constructor(){super(...arguments),this._value=null}get value(){return this._value}set value(e){(null===this._value||e>this._value)&&(this._value=e)}}let l=class extends i.default{constructor(){super("max"),this._expectedParameterCount=1}reduce(e){e.value=this.firstChild().value()}element(){return new u}};l=n([(0,o.FunctionDef)({description:"Returns the maximum value across grouped rows",category:"aggregate",parameters:[{name:"value",description:"Value to compare",type:"number"}],output:{description:"Maximum value",type:"number",example:10},examples:["WITH [3, 1, 2] AS nums UNWIND nums AS n RETURN max(n)"]})],l),t.default=l},8406(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5481)),o=r(3437),a=s(r(1206));class u extends a.default{constructor(){super(...arguments),this._value=null}get value(){return this._value}set value(e){(null===this._value||e<this._value)&&(this._value=e)}}let l=class extends i.default{constructor(){super("min"),this._expectedParameterCount=1}reduce(e){e.value=this.firstChild().value()}element(){return new u}};l=n([(0,o.FunctionDef)({description:"Returns the minimum value across grouped rows",category:"aggregate",parameters:[{name:"value",description:"Value to compare",type:"number"}],output:{description:"Minimum value",type:"number",example:1},examples:["WITH [3, 1, 2] AS nums UNWIND nums AS n RETURN min(n)"]})],l),t.default=l},2480(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=r(3437);let a=class extends i.default{constructor(){super("nodes"),this._expectedParameterCount=1}value(){const e=this.getChildren()[0].value();if(null==e)return[];if(!Array.isArray(e))throw new Error("nodes() expects a path (array)");return e.filter(e=>null!=e&&"object"==typeof e&&!("type"in e&&"startNode"in e&&"endNode"in e&&"properties"in e))}};a=n([(0,o.FunctionDef)({description:"Returns all nodes in a path as an array",category:"scalar",parameters:[{name:"path",description:"A path value returned from a graph pattern match",type:"array"}],output:{description:"Array of node records",type:"array",example:"[{ id: 1, name: 'Alice' }, { id: 2, name: 'Bob' }]"},examples:["MATCH p=(:Person)-[:KNOWS]-(:Person) RETURN nodes(p)"]})],a),t.default=a},8963(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(1542)),i=n(r(2333));class o extends s.default{constructor(e){super(),this._valueHolder=new i.default,this._name=e||this.constructor.name}get name(){return this._name}get reference(){return this.firstChild()}get array(){return this.getChildren()[1].firstChild()}get _return(){return this.getChildren()[2]}get where(){return 4===this.getChildren().length?this.getChildren()[3]:null}value(){throw new Error("Method not implemented.")}toString(){return`PredicateFunction (${this._name})`}}t.default=o},2912(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(3437),o=s(r(8963));let a=class extends o.default{constructor(){super("sum")}value(){this.reference.referred=this._valueHolder;const e=this.array.value();if(null===e||!Array.isArray(e))throw new Error("Invalid array for sum function");let t=0;for(let r=0;r<e.length;r++)this._valueHolder.holder=e[r],(null===this.where||this.where.value())&&(t+=this._return.value());return t}};a=n([(0,i.FunctionDef)({description:"Calculates the sum of values in an array with optional filtering. Uses list comprehension syntax: sum(variable IN array [WHERE condition] | expression)",category:"predicate",parameters:[{name:"variable",description:"Variable name to bind each element",type:"string"},{name:"array",description:"Array to iterate over",type:"array"},{name:"expression",description:"Expression to sum for each element",type:"any"},{name:"where",description:"Optional filter condition",type:"boolean",required:!1}],output:{description:"Sum of the evaluated expressions",type:"number",example:6},examples:["WITH [1, 2, 3] AS nums RETURN sum(n IN nums | n)","WITH [1, 2, 3, 4] AS nums RETURN sum(n IN nums WHERE n > 1 | n * 2)"]})],a),t.default=a},3920(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(r(5517)),a=r(3437);let u=class extends o.default{constructor(){super("properties"),this._expectedParameterCount=1}value(){const e=this.getChildren()[0].value();if(null==e)return null;if("object"!=typeof e||Array.isArray(e))throw new Error("properties() expects a node, relationship, or map");if("type"in e&&"startNode"in e&&"endNode"in e&&"properties"in e)return e.properties;if("id"in e){const{id:t}=e;return s(e,["id"])}return Object.assign({},e)}};u=n([(0,a.FunctionDef)({description:"Returns a map containing all the properties of a node, relationship, or map. For nodes and relationships, internal identifiers are excluded.",category:"scalar",parameters:[{name:"entity",description:"A node, relationship, or map to extract properties from",type:"object"}],output:{description:"Map of properties",type:"object",example:"{ name: 'Alice', age: 30 }"},examples:["MATCH (n:Person) RETURN properties(n)","WITH { name: 'Alice', age: 30 } AS obj RETURN properties(obj)"]})],u),t.default=u},7514(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=r(3437);let a=class extends i.default{constructor(){super("rand"),this._expectedParameterCount=0}value(){return Math.random()}};a=n([(0,o.FunctionDef)({description:"Generates a random number between 0 and 1",category:"scalar",parameters:[],output:{description:"Random number between 0 and 1",type:"number",example:.7234},examples:["WITH rand() AS r RETURN r"]})],a),t.default=a},8240(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=r(3437);let a=class extends i.default{constructor(){super("range"),this._expectedParameterCount=2}value(){const e=this.getChildren()[0].value(),t=this.getChildren()[1].value();if("number"!=typeof e||"number"!=typeof t)throw new Error("Invalid arguments for range function");return Array.from({length:t-e+1},(t,r)=>e+r)}};a=n([(0,o.FunctionDef)({description:"Generates an array of sequential integers",category:"scalar",parameters:[{name:"start",description:"Starting number (inclusive)",type:"number"},{name:"end",description:"Ending number (inclusive)",type:"number"}],output:{description:"Array of integers from start to end",type:"array",items:{type:"number"},example:[1,2,3,4,5]},examples:["WITH range(1, 5) AS nums RETURN nums"]})],a),t.default=a},1206(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{get value(){throw new Error("Method not implemented.")}set value(e){throw new Error("Method not implemented.")}}},3746(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=r(3437);let a=class extends i.default{constructor(){super("relationships"),this._expectedParameterCount=1}value(){const e=this.getChildren()[0].value();if(null==e)return[];if(!Array.isArray(e))throw new Error("relationships() expects a path (array)");return e.filter(e=>null!=e&&"object"==typeof e&&"type"in e&&"startNode"in e&&"endNode"in e&&"properties"in e)}};a=n([(0,o.FunctionDef)({description:"Returns all relationships in a path as an array",category:"scalar",parameters:[{name:"path",description:"A path value returned from a graph pattern match",type:"array"}],output:{description:"Array of relationship records",type:"array",example:"[{ type: 'KNOWS', properties: { since: '2020' } }]"},examples:["MATCH p=(:Person)-[:KNOWS]-(:Person) RETURN relationships(p)"]})],a),t.default=a},2061(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=r(3437);let a=class extends i.default{constructor(){super("replace"),this._expectedParameterCount=3}value(){const e=this.getChildren()[0].value(),t=this.getChildren()[1].value(),r=this.getChildren()[2].value();if("string"!=typeof e||"string"!=typeof t||"string"!=typeof r)throw new Error("Invalid arguments for replace function");return e.replace(new RegExp(t,"g"),r)}};a=n([(0,o.FunctionDef)({description:"Replaces occurrences of a pattern in a string",category:"scalar",parameters:[{name:"text",description:"Source string",type:"string"},{name:"pattern",description:"Pattern to find",type:"string"},{name:"replacement",description:"Replacement string",type:"string"}],output:{description:"String with replacements",type:"string",example:"hello world"},examples:["WITH 'hello there' AS s RETURN replace(s, 'there', 'world')"]})],a),t.default=a},3605(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=r(3437);let a=class extends i.default{constructor(){super("round"),this._expectedParameterCount=1}value(){const e=this.getChildren()[0].value();if("number"!=typeof e)throw new Error("Invalid argument for round function");return Math.round(e)}};a=n([(0,o.FunctionDef)({description:"Rounds a number to the nearest integer",category:"scalar",parameters:[{name:"value",description:"Number to round",type:"number"}],output:{description:"Rounded integer",type:"number",example:4},examples:["WITH 3.7 AS n RETURN round(n)"]})],a),t.default=a},9574(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__await||function(e){return this instanceof s?(this.v=e,this):new s(e)},i=this&&this.__asyncGenerator||function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),o=[];return n=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),n[Symbol.asyncIterator]=function(){return this},n;function a(e,t){i[e]&&(n[e]=function(t){return new Promise(function(r,n){o.push([e,t,r,n])>1||u(e,t)})},t&&(n[e]=t(n[e])))}function u(e,t){try{(r=i[e](t)).value instanceof s?Promise.resolve(r.value.v).then(l,c):h(o[0][2],r)}catch(e){h(o[0][3],e)}var r}function l(e){u("next",e)}function c(e){u("throw",e)}function h(e,t){e(t),o.shift(),o.length&&u(o[0][0],o[0][1])}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(r(5346)),u=o(r(3680)),l=r(3437);let c=class extends u.default{generate(){return i(this,arguments,function*(){const e=yield s(a.default.getInstance().schema());for(const t of e)yield yield s(t)})}};c=n([(0,l.FunctionDef)({description:"Returns the graph schema listing all nodes and relationships with their properties and a sample of their data.",category:"async",parameters:[],output:{description:"Schema entry with label/type, properties, and optional sample data",type:"object"},examples:["LOAD FROM schema() AS s RETURN s"]})],c),t.default=c},9700(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=r(3437);let a=class extends i.default{constructor(){super("size"),this._expectedParameterCount=1}value(){const e=this.getChildren()[0].value();if(!Array.isArray(e))throw new Error("Invalid argument for size function");return e.length}};a=n([(0,o.FunctionDef)({description:"Returns the length of an array or string",category:"scalar",parameters:[{name:"value",description:"Array or string to measure",type:"array"}],output:{description:"Length of the input",type:"number",example:3},examples:["WITH [1, 2, 3] AS arr RETURN size(arr)"]})],a),t.default=a},6781(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=s(r(3198)),a=r(3437);let u=class extends i.default{constructor(){super("split"),this._expectedParameterCount=2}set parameters(e){1===e.length&&e.push(new o.default("")),super.parameters=e}value(){const e=this.getChildren()[0].value(),t=this.getChildren()[1].value();if("string"!=typeof e||"string"!=typeof t)throw new Error("Invalid arguments for split function");return e.split(t)}};u=n([(0,a.FunctionDef)({description:"Splits a string into an array by a delimiter",category:"scalar",parameters:[{name:"text",description:"String to split",type:"string"},{name:"delimiter",description:"Delimiter to split by",type:"string"}],output:{description:"Array of string parts",type:"array",items:{type:"string"},example:["a","b","c"]},examples:["WITH 'a,b,c' AS s RETURN split(s, ',')"]})],u),t.default=u},3628(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=r(3437);let a=class extends i.default{constructor(){super("string_distance"),this._expectedParameterCount=2}value(){const e=this.getChildren()[0].value(),t=this.getChildren()[1].value();if("string"!=typeof e||"string"!=typeof t)throw new Error("Invalid arguments for string_distance function: both arguments must be strings");return function(e,t){const r=e.length,n=t.length;if(0===r&&0===n)return 0;const s=Array.from({length:r+1},()=>new Array(n+1).fill(0));for(let e=0;e<=r;e++)s[e][0]=e;for(let e=0;e<=n;e++)s[0][e]=e;for(let i=1;i<=r;i++)for(let r=1;r<=n;r++){const n=e[i-1]===t[r-1]?0:1;s[i][r]=Math.min(s[i-1][r]+1,s[i][r-1]+1,s[i-1][r-1]+n)}return s[r][n]/Math.max(r,n)}(e,t)}};a=n([(0,o.FunctionDef)({description:"Computes the normalized Levenshtein distance between two strings. Returns a value in [0, 1] where 0 means identical and 1 means completely different.",category:"scalar",parameters:[{name:"string1",description:"First string",type:"string"},{name:"string2",description:"Second string",type:"string"}],output:{description:"Normalized Levenshtein distance (0 = identical, 1 = completely different)",type:"number",example:.43},examples:["RETURN string_distance('kitten', 'sitting')","WITH 'hello' AS a, 'hallo' AS b RETURN string_distance(a, b)"]})],a),t.default=a},3700(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=s(r(3818)),a=r(3437);let u=class extends i.default{constructor(){super("stringify"),this._expectedParameterCount=2}set parameters(e){1===e.length&&e.push(new o.default("3")),super.parameters=e}value(){const e=this.getChildren()[0].value(),t=parseInt(this.getChildren()[1].value());if("object"!=typeof e)throw new Error("Invalid argument for stringify function");return JSON.stringify(e,null,t)}};u=n([(0,a.FunctionDef)({description:"Converts a value to its JSON string representation",category:"scalar",parameters:[{name:"value",description:"Value to stringify",type:"any"}],output:{description:"JSON string",type:"string",example:'{"a":1}'},examples:["WITH {a: 1} AS obj RETURN stringify(obj)"]})],u),t.default=u},9854(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5481)),o=s(r(1206)),a=r(3437);class u extends o.default{constructor(){super(...arguments),this._value=null}get value(){return this._value}set value(e){null!==this._value?this._value+=e:this._value=e}}let l=class extends i.default{constructor(){super("sum"),this._expectedParameterCount=1}reduce(e){e.value=this.firstChild().value()}element(){return new u}};l=n([(0,a.FunctionDef)({description:"Calculates the sum of numeric values across grouped rows",category:"aggregate",parameters:[{name:"value",description:"Numeric value to sum",type:"number"}],output:{description:"Sum of all values",type:"number",example:150},examples:["WITH [1, 2, 3] AS nums UNWIND nums AS n RETURN sum(n)"]})],l),t.default=l},9391(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=r(3437);let a=class extends i.default{constructor(){super("tail"),this._expectedParameterCount=1}value(){const e=this.getChildren()[0].value();if(null==e)return null;if(!Array.isArray(e))throw new Error("tail() expects a list");return e.slice(1)}};a=n([(0,o.FunctionDef)({description:"Returns all elements of a list except the first",category:"scalar",parameters:[{name:"list",description:"The list to get all but the first element from",type:"array"}],output:{description:"All elements except the first",type:"array",example:"[2, 3]"},examples:["RETURN tail([1, 2, 3])","WITH ['a', 'b', 'c'] AS items RETURN tail(items)"]})],a),t.default=a},2718(e,t){function r(e){const t=e.getDay();return 0===t?7:t}function n(e){const t=new Date(e.getFullYear(),0,0),r=e.getTime()-t.getTime();return Math.floor(r/864e5)}function s(e){return Math.floor(e/3)+1}function i(e,t=2){return String(e).padStart(t,"0")}Object.defineProperty(t,"__esModule",{value:!0}),t.parseTemporalArg=function(e,t){var r,n,s,i,o,a,u;if("string"==typeof e){const r=new Date(e);if(isNaN(r.getTime()))throw new Error(`${t}(): Invalid temporal string: '${e}'`);return r}if("number"==typeof e)return new Date(e);if("object"==typeof e&&null!==e&&!Array.isArray(e)){const t=null!==(r=e.year)&&void 0!==r?r:(new Date).getFullYear(),l=(null!==(n=e.month)&&void 0!==n?n:1)-1,c=null!==(s=e.day)&&void 0!==s?s:1,h=null!==(i=e.hour)&&void 0!==i?i:0,d=null!==(o=e.minute)&&void 0!==o?o:0,f=null!==(a=e.second)&&void 0!==a?a:0,p=null!==(u=e.millisecond)&&void 0!==u?u:0;return new Date(t,l,c,h,d,f,p)}throw new Error(`${t}(): Expected a string, number (epoch millis), or map argument, got ${typeof e}`)},t.buildDatetimeObject=function(e,t){const o=t?e.getUTCFullYear():e.getFullYear(),a=t?e.getUTCMonth()+1:e.getMonth()+1,u=t?e.getUTCDate():e.getDate(),l=t?e.getUTCHours():e.getHours(),c=t?e.getUTCMinutes():e.getMinutes(),h=t?e.getUTCSeconds():e.getSeconds(),d=t?e.getUTCMilliseconds():e.getMilliseconds(),f=new Date(o,a-1,u),p=t?e.toISOString():`${o}-${i(a)}-${i(u)}T${i(l)}:${i(c)}:${i(h)}.${i(d,3)}`;return{year:o,month:a,day:u,hour:l,minute:c,second:h,millisecond:d,epochMillis:e.getTime(),epochSeconds:Math.floor(e.getTime()/1e3),dayOfWeek:r(f),dayOfYear:n(f),quarter:s(a-1),formatted:p}},t.buildDateObject=function(e){const t=e.getFullYear(),o=e.getMonth()+1,a=e.getDate(),u=new Date(t,o-1,a);return{year:t,month:o,day:a,epochMillis:u.getTime(),dayOfWeek:r(u),dayOfYear:n(u),quarter:s(o-1),formatted:`${t}-${i(o)}-${i(a)}`}},t.buildTimeObject=function(e,t){const r=t?e.getUTCHours():e.getHours(),n=t?e.getUTCMinutes():e.getMinutes(),s=t?e.getUTCSeconds():e.getSeconds(),o=t?e.getUTCMilliseconds():e.getMilliseconds(),a=`${i(r)}:${i(n)}:${i(s)}.${i(o,3)}`;return{hour:r,minute:n,second:s,millisecond:o,formatted:t?`${a}Z`:a}}},8140(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=r(3437),a=r(2718);let u=class extends i.default{constructor(){super("time"),this._expectedParameterCount=null}value(){const e=this.getChildren();if(e.length>1)throw new Error("time() accepts at most one argument");const t=1===e.length?(0,a.parseTemporalArg)(e[0].value(),"time"):new Date;return(0,a.buildTimeObject)(t,!0)}};u=n([(0,o.FunctionDef)({description:"Returns a time value. With no arguments returns the current UTC time. Accepts an ISO 8601 time string or a map of components (hour, minute, second, millisecond).",category:"scalar",parameters:[{name:"input",description:"Optional. An ISO 8601 time string (HH:MM:SS) or a map of components.",type:"string",required:!1}],output:{description:"A time object with properties: hour, minute, second, millisecond, formatted",type:"object"},examples:["RETURN time() AS now","RETURN time('12:30:00') AS t","WITH time() AS t RETURN t.hour, t.minute"]})],u),t.default=u},5445(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=r(3437);let a=class extends i.default{constructor(){super("timestamp"),this._expectedParameterCount=0}value(){return Date.now()}};a=n([(0,o.FunctionDef)({description:"Returns the number of milliseconds since the Unix epoch (1970-01-01T00:00:00Z).",category:"scalar",parameters:[],output:{description:"Milliseconds since Unix epoch",type:"number",example:171845e7},examples:["RETURN timestamp() AS ts","WITH timestamp() AS before, timestamp() AS after RETURN after - before"]})],a),t.default=a},909(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=r(3437);let a=class extends i.default{constructor(){super("tofloat"),this._expectedParameterCount=1}value(){const e=this.getChildren()[0].value();if(null==e)return null;if("boolean"==typeof e)return e?1:0;if("number"==typeof e)return e;if("string"==typeof e){const t=e.trim(),r=Number(t);if(isNaN(r))throw new Error(`Cannot convert string "${e}" to float`);return r}throw new Error("toFloat() expects a number, string, or boolean")}};a=n([(0,o.FunctionDef)({description:"Converts a value to a floating point number",category:"scalar",parameters:[{name:"value",description:"The value to convert to a float",type:"any"}],output:{description:"The floating point representation of the value",type:"number",example:"3.14"},examples:['RETURN toFloat("3.14")',"RETURN toFloat(42)","RETURN toFloat(true)"]})],a),t.default=a},1793(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=r(3437);let a=class extends i.default{constructor(){super("tointeger"),this._expectedParameterCount=1}value(){const e=this.getChildren()[0].value();if(null==e)return null;if("boolean"==typeof e)return e?1:0;if("number"==typeof e)return Math.trunc(e);if("string"==typeof e){const t=e.trim(),r=Number(t);if(isNaN(r))throw new Error(`Cannot convert string "${e}" to integer`);return Math.trunc(r)}throw new Error("toInteger() expects a number, string, or boolean")}};a=n([(0,o.FunctionDef)({description:"Converts a value to an integer",category:"scalar",parameters:[{name:"value",description:"The value to convert to an integer",type:"any"}],output:{description:"The integer representation of the value",type:"number",example:"42"},examples:['RETURN toInteger("42")',"RETURN toInteger(3.14)","RETURN toInteger(true)"]})],a),t.default=a},8673(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=r(3437);let a=class extends i.default{constructor(){super("tojson"),this._expectedParameterCount=1}value(){const e=this.getChildren()[0].value();if("string"!=typeof e)throw new Error("Invalid arguments for tojson function");return JSON.parse(e)}};a=n([(0,o.FunctionDef)({description:"Parses a JSON string into an object",category:"scalar",parameters:[{name:"text",description:"JSON string to parse",type:"string"}],output:{description:"Parsed object or array",type:"object",example:{a:1}},examples:["WITH '{\"a\": 1}' AS s RETURN tojson(s)"]})],a),t.default=a},898(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=r(3437);let a=class extends i.default{constructor(){super("tolower"),this._expectedParameterCount=1}value(){const e=this.getChildren()[0].value();if("string"!=typeof e)throw new Error("Invalid argument for toLower function: expected a string");return e.toLowerCase()}};a=n([(0,o.FunctionDef)({description:"Converts a string to lowercase",category:"scalar",parameters:[{name:"text",description:"String to convert to lowercase",type:"string"}],output:{description:"Lowercase string",type:"string",example:"hello world"},examples:["WITH 'Hello World' AS s RETURN toLower(s)","WITH 'FOO' AS s RETURN toLower(s)"]})],a),t.default=a},1278(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=r(3437);let a=class extends i.default{constructor(){super("tostring"),this._expectedParameterCount=1}value(){const e=this.getChildren()[0].value();return null==e?String(e):"object"==typeof e?JSON.stringify(e):String(e)}};a=n([(0,o.FunctionDef)({description:"Converts a value to its string representation",category:"scalar",parameters:[{name:"value",description:"Value to convert to a string",type:"any"}],output:{description:"String representation of the value",type:"string",example:"42"},examples:["WITH 42 AS n RETURN toString(n)","WITH true AS b RETURN toString(b)","WITH [1, 2, 3] AS arr RETURN toString(arr)"]})],a),t.default=a},6609(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=r(3437);let a=class extends i.default{constructor(){super("trim"),this._expectedParameterCount=1}value(){const e=this.getChildren()[0].value();if("string"!=typeof e)throw new Error("Invalid argument for trim function: expected a string");return e.trim()}};a=n([(0,o.FunctionDef)({description:"Removes leading and trailing whitespace from a string",category:"scalar",parameters:[{name:"text",description:"String to trim",type:"string"}],output:{description:"Trimmed string",type:"string",example:"hello"},examples:["WITH '  hello  ' AS s RETURN trim(s)","WITH '\\tfoo\\n' AS s RETURN trim(s)"]})],a),t.default=a},8749(e,t,r){var n=this&&this.__decorate||function(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5517)),o=r(3437);let a=class extends i.default{constructor(){super("type"),this._expectedParameterCount=1}value(){const e=this.getChildren()[0].value();return null===e?"null":void 0===e?"undefined":Array.isArray(e)?"array":typeof e}};a=n([(0,o.FunctionDef)({description:"Returns the type of a value as a string",category:"scalar",parameters:[{name:"value",description:"Value to check the type of",type:"any"}],output:{description:"Type of the input value",type:"string",example:"string"},examples:["WITH 'hello' AS val RETURN type(val)","WITH 42 AS val RETURN type(val)","WITH [1, 2, 3] AS val RETURN type(val)"]})],a),t.default=a},2333(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(1542));class i extends s.default{set holder(e){this._holder=e}value(){return this._holder}}t.default=i},6052(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(1542)),i=n(r(1740));class o extends s.default{constructor(){super()}value(){let e=0,t=this.getChildren()[e];for(;t instanceof i.default;){const r=this.getChildren()[e+1];if(t.value())return r.value();e+=2,t=this.getChildren()[e]}return t.value()}}t.default=o},3501(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(1542));class i extends s.default{constructor(){super()}value(){return this.getChildren()[0].value()}}t.default=i},6263(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(1542));class i extends s.default{constructor(){super()}}t.default=i},6667(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(1542));class i extends s.default{constructor(){super()}value(){return this.getChildren()[0].value()}}t.default=i},1740(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(1542));class i extends s.default{constructor(){super()}value(){return this.getChildren()[0].value()}}t.default=i},8682(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(7342)),o=s(r(9025));class a extends i.default{constructor(){super(...arguments),this._group_by=new o.default(this.children)}run(){return n(this,void 0,void 0,function*(){yield this._group_by.run()})}get results(){return null!==this._where&&(this._group_by.where=this._where),Array.from(this._group_by.generate_results())}}t.default=a},6564(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(7342)),o=s(r(9025));class a extends i.default{constructor(){super(...arguments),this._group_by=new o.default(this.children)}run(){return n(this,void 0,void 0,function*(){yield this._group_by.run()})}finish(){const e=Object.create(null,{finish:{get:()=>super.finish}});return n(this,void 0,void 0,function*(){var t;for(const e of this._group_by.generate_results())yield null===(t=this.next)||void 0===t?void 0:t.run();yield e.finish.call(this)})}}t.default=a},888(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})},s=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,s){!function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)}(n,s,(t=e[r](t)).done,t.value)})}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(r(4484)),a=i(r(505)),u="value";class l extends a.default{constructor(){super([]),this._function=null,this._map=new o.default,this._results=[]}set function(e){this._function=e}get function(){return this._function}set yielded(e){this.children=e,this._map.map=e}get hasYield(){return this.children.length>0}run(){return n(this,void 0,void 0,function*(){var e,t,r,n,i;if(null===this._function)throw new Error("No function set for Call operation.");const o=this._function.getArguments();try{for(var a,l=!0,c=s(this._function.generate(...o));!(e=(a=yield c.next()).done);l=!0){n=a.value,l=!1;const e=n;if(this.isLast){const t=new Map;if("object"!=typeof e||Array.isArray(e))t.set(u,e);else for(const[r,n]of Object.entries(e))!this._map.has(r)&&this.hasYield||t.set(r,n);this._results.push(Object.fromEntries(t))}else{if("object"!=typeof e||Array.isArray(e)){const t=this._map.get(u);t&&(t.overridden=e)}else for(const[t,r]of Object.entries(e)){const e=this._map.get(t);e&&(e.overridden=r)}yield null===(i=this.next)||void 0===i?void 0:i.run()}}}catch(e){t={error:e}}finally{try{l||e||!(r=c.return)||(yield r.call(c))}finally{if(t)throw t.error}}})}get results(){return this._results}}t.default=l},8739(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5346)),o=s(r(5239));class a extends o.default{constructor(e,t){super(),this._node=null,this._statement=null,this._node=e,this._statement=t}get node(){return this._node}get statement(){return this._statement}run(){return new Promise((e,t)=>n(this,void 0,void 0,function*(){try{if(null===this._node)throw new Error("Node is null");i.default.getInstance().addNode(this._node,this._statement),e()}catch(e){t(e)}}))}get results(){return[]}}t.default=a},7485(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5346)),o=s(r(5239));class a extends o.default{constructor(e,t){super(),this._relationship=null,this._statement=null,this._relationship=e,this._statement=t}get relationship(){return this._relationship}get statement(){return this._statement}run(){return new Promise((e,t)=>n(this,void 0,void 0,function*(){try{if(null===this._relationship)throw new Error("Relationship is null");i.default.getInstance().addRelationship(this._relationship,this._statement),e()}catch(e){t(e)}}))}get results(){return[]}}t.default=a},9025(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(505));class o{constructor(e=null){this._children=new Map,this._elements=null,this._value=e}get value(){return this._value}get children(){return this._children}get elements(){return this._elements}set elements(e){this._elements=e}}class a extends i.default{constructor(){super(...arguments),this._root=new o,this._current=this._root,this._mappers=null,this._reducers=null,this._where=null}run(){return n(this,void 0,void 0,function*(){this.resetTree(),this.map(),this.reduce()})}get root(){return this._root}get current(){return this._current}set current(e){this._current=e}resetTree(){this.current=this.root}map(){let e=this.current;for(const t of this.mappers){const r=t.value();let n=e.children.get(r);void 0===n&&(n=new o(r),e.children.set(r,n)),e=n}this.current=e}reduce(){null===this.current.elements&&(this.current.elements=this.reducers.map(e=>e.element()));const e=this.current.elements;this.reducers.forEach((t,r)=>{t.reduce(e[r])})}get mappers(){return null===this._mappers&&(this._mappers=[...this._generate_mappers()]),this._mappers}*_generate_mappers(){for(const[e,t]of this.expressions())e.mappable()&&(yield e)}get reducers(){return null===this._reducers&&(this._reducers=this.children.map(e=>e.reducers()).flat()),this._reducers}*generate_results(e=0,t=this.root){if(!(0===e&&0===t.children.size&&this.mappers.length>0))if(t.children.size>0)for(const r of t.children.values())this.mappers[e].overridden=r.value,yield*this.generate_results(e+1,r);else{null===t.elements&&(t.elements=this.reducers.map(e=>e.element())),t.elements.forEach((e,t)=>{this.reducers[t].overridden=e.value});const e={};for(const[t,r]of this.expressions())e[r]=t.value();this.where&&(yield e)}}set where(e){this._where=e}get where(){return null===this._where||this._where.value()}}t.default=a},8365(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5239));class o extends i.default{constructor(e){super(),this.count=0,this.limit=0,this.limit=e}run(){return n(this,void 0,void 0,function*(){var e;this.count>=this.limit||(this.count++,yield null===(e=this.next)||void 0===e?void 0:e.run())})}reset(){this.count=0}}t.default=o},1816(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})},s=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,s){!function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)}(n,s,(t=e[r](t)).done,t.value)})}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(r(9798)),a=i(r(5956)),u=i(r(440)),l=i(r(2457)),c=i(r(3680)),h=i(r(5239));class d extends h.default{constructor(){super(),this._value=null}get type(){return this.children[0]}get fromComponent(){return this.children[1]}get isAsyncFunction(){return this.fromComponent.firstChild()instanceof c.default}get asyncFunction(){const e=this.fromComponent.firstChild();return e instanceof c.default?e:null}get from(){return this.children[1].value()}get headers(){return this.childCount()>2&&this.children[2]instanceof o.default&&this.children[2].value()||{}}get payload(){let e=null;return this.childCount()>2&&this.children[2]instanceof u.default?e=this.children[2]:this.childCount()>3&&this.children[3]instanceof u.default&&(e=this.children[3]),null!==e?e.firstChild():null}method(){return null===this.payload?"GET":"POST"}options(){const e=this.headers,t=this.payload,r=null==t?void 0:t.value();return null===r||"object"!=typeof r||e.hasOwnProperty("Content-Type")||(e["Content-Type"]="application/json"),Object.assign({method:this.method(),headers:e},null!==t?{body:JSON.stringify(t.value())}:{})}loadFromFunction(){return n(this,void 0,void 0,function*(){var e,t,r,n,i;const o=this.asyncFunction,a=o.getArguments();try{for(var u,l=!0,c=s(o.generate(...a));!(e=(u=yield c.next()).done);l=!0){n=u.value,l=!1;const e=n;this._value=e,yield null===(i=this.next)||void 0===i?void 0:i.run()}}catch(e){t={error:e}}finally{try{l||e||!(r=c.return)||(yield r.call(c))}finally{if(t)throw t.error}}})}loadFromUrl(){return n(this,void 0,void 0,function*(){var e,t,r;const n=yield fetch(this.from,this.options());let s=null;if(this.type instanceof a.default?s=yield n.json():this.type instanceof l.default&&(s=yield n.text()),Array.isArray(s))for(const t of s)this._value=t,yield null===(e=this.next)||void 0===e?void 0:e.run();else"object"==typeof s&&null!==s?(this._value=s,yield null===(t=this.next)||void 0===t?void 0:t.run()):"string"==typeof s&&(this._value=s,yield null===(r=this.next)||void 0===r?void 0:r.run())})}load(){return n(this,void 0,void 0,function*(){this.isAsyncFunction?yield this.loadFromFunction():yield this.loadFromUrl()})}run(){return n(this,void 0,void 0,function*(){var e;try{yield this.load()}catch(t){const r=this.isAsyncFunction?null===(e=this.asyncFunction)||void 0===e?void 0:e.name:this.from;throw new Error(`Failed to load data from ${r}. Error: ${t}`)}})}value(){return this._value}}t.default=d},7959(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(4603)),o=s(r(6572)),a=s(r(5239));class u extends a.default{constructor(e=[],t=!1){super(),this._patterns=null,this._optional=!1,this._patterns=new o.default(e),this._optional=t}get patterns(){return this._patterns?this._patterns.patterns:[]}get optional(){return this._optional}toString(){return this._optional?"OptionalMatch":"Match"}run(){return n(this,void 0,void 0,function*(){var e;yield this._patterns.initialize();let t=!1;if(this._patterns.toDoNext=()=>n(this,void 0,void 0,function*(){var e;t=!0,yield null===(e=this.next)||void 0===e?void 0:e.run()}),yield this._patterns.traverse(),!t&&this._optional){for(const e of this._patterns.patterns)for(const t of e.chain)t instanceof i.default&&t.setValue(null);yield null===(e=this.next)||void 0===e?void 0:e.run()}})}}t.default=u},5239(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(1542));class o extends i.default{constructor(){super(),this._previous=null,this._next=null}get previous(){return this._previous}set previous(e){this._previous=e}get next(){return this._next}set next(e){this._next=e}addSibling(e){var t;null===(t=this._parent)||void 0===t||t.addChild(e),e.previous=this,this.next=e}get isLast(){return null===this._next}run(){return n(this,void 0,void 0,function*(){throw new Error("Not implemented")})}finish(){return n(this,void 0,void 0,function*(){var e;yield null===(e=this.next)||void 0===e?void 0:e.finish()})}initialize(){return n(this,void 0,void 0,function*(){var e;yield null===(e=this.next)||void 0===e?void 0:e.initialize()})}reset(){}get results(){throw new Error("Not implemented")}}t.default=o},505(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(5239));class i extends s.default{constructor(e){super(),this.children=e}*expressions(){for(let e=0;e<this.children.length;e++){const t=this.children[e],r=t.alias||`expr${e}`;yield[t,r]}}}t.default=i},7342(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(505));class o extends i.default{constructor(){super(...arguments),this._where=null,this._results=[]}set where(e){this._where=e}get where(){return null===this._where||this._where.value()}run(){return n(this,void 0,void 0,function*(){if(!this.where)return;const e=new Map;for(const[t,r]of this.expressions()){const n=t.value(),s="object"==typeof n&&null!==n?structuredClone(n):n;e.set(r,s)}this._results.push(Object.fromEntries(e))})}initialize(){return n(this,void 0,void 0,function*(){this._results=[]})}get results(){return this._results}}t.default=o},877(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5239));class o extends i.default{constructor(){super(...arguments),this._left=null,this._right=null,this._results=[]}set left(e){this._left=e}get left(){if(!this._left)throw new Error("Left operation is not set");return this._left}set right(e){this._right=e}get right(){if(!this._right)throw new Error("Right operation is not set");return this._right}lastInChain(e){let t=e;for(;t.next;)t=t.next;return t}initialize(){return n(this,void 0,void 0,function*(){var e;this._results=[],yield null===(e=this.next)||void 0===e?void 0:e.initialize()})}run(){return n(this,void 0,void 0,function*(){yield this._left.initialize(),yield this._left.run(),yield this._left.finish();const e=this.lastInChain(this._left).results;yield this._right.initialize(),yield this._right.run(),yield this._right.finish();const t=this.lastInChain(this._right).results;if(e.length>0&&t.length>0&&Object.keys(e[0]).sort().join(",")!==Object.keys(t[0]).sort().join(","))throw new Error("All sub queries in a UNION must have the same return column names");this._results=this.combine(e,t)})}combine(e,t){const r=[...e];for(const e of t){const t=JSON.stringify(e);r.some(e=>JSON.stringify(e)===t)||r.push(e)}return r}finish(){return n(this,void 0,void 0,function*(){var e;yield null===(e=this.next)||void 0===e?void 0:e.finish()})}get results(){return this._results}}t.default=o},1649(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(877));class i extends s.default{combine(e,t){return[...e,...t]}}t.default=i},577(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5239));class o extends i.default{constructor(e){super(),this.addChild(e)}get expression(){return this.children[0]}get as(){return this.children[1].value}run(){return n(this,void 0,void 0,function*(){var e,t;const r=this.expression.value();if(!Array.isArray(r))throw new Error("Expected array");for(let t=0;t<r.length;t++)this._value=r[t],yield null===(e=this.next)||void 0===e?void 0:e.run();null===(t=this.next)||void 0===t||t.reset()})}value(){return this._value}}t.default=o},6001(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(5239));class o extends i.default{constructor(e){super(),this.addChild(e)}get expression(){return this.children[0]}run(){return n(this,void 0,void 0,function*(){var e;for(const e of this.expression.patterns())yield e.fetchData(),yield e.evaluate();this.expression.value()&&(yield null===(e=this.next)||void 0===e?void 0:e.run())})}value(){return this.expression.value()}}t.default=o},696(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(r(505));class o extends i.default{run(){return n(this,void 0,void 0,function*(){var e;yield null===(e=this.next)||void 0===e?void 0:e.run()})}}t.default=o},7056(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(8659)),i=n(r(4603)),o=n(r(1381)),a=n(r(1365)),u=n(r(1982)),l=n(r(165)),c=n(r(4407)),h=n(r(7847)),d=n(r(3001)),f=n(r(5859)),p=r(4275),_=n(r(1542)),m=n(r(3738)),v=n(r(970)),y=n(r(9798)),g=n(r(8587)),w=n(r(440)),E=n(r(122)),x=n(r(1363)),O=n(r(2073)),R=n(r(9997)),T=n(r(3399)),A=n(r(3573)),N=n(r(1153)),k=n(r(5196)),b=r(4783),C=n(r(2730)),S=n(r(3198)),P=n(r(5481)),D=n(r(5517)),M=n(r(2312)),I=n(r(6052)),j=n(r(3501)),W=n(r(6667)),L=n(r(1740)),U=n(r(8682)),F=n(r(6564)),H=n(r(888)),Y=n(r(8739)),K=n(r(7485)),B=n(r(8365)),G=n(r(1816)),$=n(r(7959)),q=n(r(7342)),V=n(r(877)),Q=n(r(1649)),z=n(r(577)),J=n(r(6001)),X=n(r(696)),Z=n(r(5838));class ee extends m.default{constructor(){super(...arguments),this._state=new Z.default}parse(e){return this.tokenize(e),this._parseTokenized()}_parseTokenized(e=!1){const t=new _.default;let r=null,n=null;for(;!this.token.isEOF()&&(t.childCount()>0?this.expectAndSkipWhitespaceAndComments():this.skipWhitespaceAndComments(),!this.token.isUnion());){if(n=this.parseOperation(),null===n&&!e)throw new Error("Expected one of WITH, UNWIND, RETURN, LOAD, OR CALL");if(null===n&&e)return t;if(this._state.returns>1)throw new Error("Only one RETURN statement is allowed");if(r instanceof H.default&&!r.hasYield)throw new Error("CALL operations must have a YIELD clause unless they are the last operation");null!==r?r.addSibling(n):t.addChild(n);const s=this.parseWhere();null!==s&&(n instanceof q.default?n.where=s:(n.addSibling(s),n=s));const i=this.parseLimit();null!==i&&(n.addSibling(i),n=i),r=n}if(!this.token.isEOF()&&this.token.isUnion()){if(!(n instanceof q.default||n instanceof H.default))throw new Error("Each side of UNION must end with a RETURN or CALL statement");const r=this.parseUnion();r.left=t.firstChild();const s=this._state;this._state=new Z.default;const i=this._parseTokenized(e);r.right=i.firstChild(),this._state=s;const o=new _.default;return o.addChild(r),o}if(!(n instanceof q.default||n instanceof H.default||n instanceof Y.default||n instanceof K.default))throw new Error("Last statement must be a RETURN, WHERE, CALL, or CREATE statement");return t}parseOperation(){return this.parseWith()||this.parseUnwind()||this.parseReturn()||this.parseLoad()||this.parseCall()||this.parseCreate()||this.parseMatch()}parseWith(){if(!this.token.isWith())return null;this.setNextToken(),this.expectAndSkipWhitespaceAndComments();let e=!1;this.token.isDistinct()&&(e=!0,this.setNextToken(),this.expectAndSkipWhitespaceAndComments());const t=Array.from(this.parseExpressions(p.AliasOption.REQUIRED));if(0===t.length)throw new Error("Expected expression");return e||t.some(e=>e.has_reducers())?new F.default(t):new X.default(t)}parseUnwind(){if(!this.token.isUnwind())return null;this.setNextToken(),this.expectAndSkipWhitespaceAndComments();const e=this.parseExpression();if(null===e)throw new Error("Expected expression");if(!d.default.isInstanceOfAny(e.firstChild(),[x.default,D.default,C.default,R.default,T.default]))throw new Error("Expected array, function, reference, or lookup.");this.expectAndSkipWhitespaceAndComments();const t=this.parseAlias();if(null===t)throw new Error("Expected alias");e.setAlias(t.getAlias());const r=new z.default(e);return this._state.variables.set(t.getAlias(),r),r}parseReturn(){if(!this.token.isReturn())return null;this.setNextToken(),this.expectAndSkipWhitespaceAndComments();let e=!1;this.token.isDistinct()&&(e=!0,this.setNextToken(),this.expectAndSkipWhitespaceAndComments());const t=Array.from(this.parseExpressions(p.AliasOption.OPTIONAL));if(0===t.length)throw new Error("Expected expression");return e||t.some(e=>e.has_reducers())?new U.default(t):(this._state.incrementReturns(),new q.default(t))}parseWhere(){if(this.skipWhitespaceAndComments(),!this.token.isWhere())return null;this.expectPreviousTokenToBeWhitespaceOrComment(),this.setNextToken(),this.expectAndSkipWhitespaceAndComments();const e=this.parseExpression();if(null===e)throw new Error("Expected expression");if(d.default.isInstanceOfAny(e.firstChild(),[x.default,E.default]))throw new Error("Expected an expression which can be evaluated to a boolean");return new J.default(e)}parseLoad(){if(!this.token.isLoad())return null;const e=new G.default;if(this.setNextToken(),this.expectAndSkipWhitespaceAndComments(),!(this.token.isJSON()||this.token.isCSV()||this.token.isText()))throw new Error("Expected JSON, CSV, or TEXT");if(e.addChild(this.token.node),this.setNextToken(),this.expectAndSkipWhitespaceAndComments(),!this.token.isFrom())throw new Error("Expected FROM");this.setNextToken(),this.expectAndSkipWhitespaceAndComments();const t=new v.default;e.addChild(t);const r=this.parseAsyncFunction();if(null!==r)t.addChild(r);else{const e=this.parseExpression();if(null===e)throw new Error("Expected expression or async function");t.addChild(e)}if(this.expectAndSkipWhitespaceAndComments(),this.token.isHeaders()){const t=new y.default;this.setNextToken(),this.expectAndSkipWhitespaceAndComments();const r=this.parseExpression();if(null===r)throw new Error("Expected expression");t.addChild(r),e.addChild(t),this.expectAndSkipWhitespaceAndComments()}if(this.token.isPost()){const t=new w.default;this.setNextToken(),this.expectAndSkipWhitespaceAndComments();const r=this.parseExpression();if(null===r)throw new Error("Expected expression");t.addChild(r),e.addChild(t),this.expectAndSkipWhitespaceAndComments()}const n=this.parseAlias();if(null===n)throw new Error("Expected alias");return e.addChild(n),this._state.variables.set(n.getAlias(),e),e}parseCall(){if(!this.token.isCall())return null;this.setNextToken(),this.expectAndSkipWhitespaceAndComments();const e=this.parseAsyncFunction();if(null===e)throw new Error("Expected async function");const t=new H.default;if(t.function=e,this.skipWhitespaceAndComments(),this.token.isYield()){this.expectPreviousTokenToBeWhitespaceOrComment(),this.setNextToken(),this.expectAndSkipWhitespaceAndComments();const e=Array.from(this.parseExpressions(p.AliasOption.OPTIONAL));if(0===e.length)throw new Error("Expected at least one expression");t.yielded=e}return t}parseCreate(){var e;if(!this.token.isCreate())return null;if(this.setNextToken(),this.expectAndSkipWhitespaceAndComments(),!this.token.isVirtual())throw new Error("Expected VIRTUAL");this.setNextToken(),this.expectAndSkipWhitespaceAndComments();const t=this.parseNode();if(null===t)throw new Error("Expected node definition");let r=null;if(this.token.isSubtract()&&(null===(e=this.peek())||void 0===e?void 0:e.isOpeningBracket())){if(this.setNextToken(),this.setNextToken(),!this.token.isColon())throw new Error("Expected ':' for relationship type");if(this.setNextToken(),!this.token.isIdentifierOrKeyword())throw new Error("Expected relationship type identifier");const e=this.token.value||"";if(this.setNextToken(),!this.token.isClosingBracket())throw new Error("Expected closing bracket for relationship definition");if(this.setNextToken(),!this.token.isSubtract())throw new Error("Expected '-' for relationship definition");this.setNextToken();const n=this.parseNode();if(null===n)throw new Error("Expected target node definition");r=new l.default,r.type=e,r.source=t,r.target=n}if(this.expectAndSkipWhitespaceAndComments(),!this.token.isAs())throw new Error("Expected AS");this.setNextToken(),this.expectAndSkipWhitespaceAndComments();const n=this.parseSubQuery();if(null===n)throw new Error("Expected sub-query");let s;return s=null!==r?new K.default(r,n):new Y.default(t,n),s}parseMatch(){let e=!1;if(this.token.isOptional()&&(e=!0,this.setNextToken(),this.expectAndSkipWhitespaceAndComments()),!this.token.isMatch()){if(e)throw new Error("Expected MATCH after OPTIONAL");return null}this.setNextToken(),this.expectAndSkipWhitespaceAndComments();const t=Array.from(this.parsePatterns());if(0===t.length)throw new Error("Expected graph pattern");return new $.default(t,e)}parseNode(){var e,t,r;if(!this.token.isLeftParenthesis())return null;this.setNextToken(),this.skipWhitespaceAndComments();let n=null;this.token.isIdentifierOrKeyword()&&(n=this.token.value||"",this.setNextToken()),this.skipWhitespaceAndComments();let s=null;if(!this.token.isColon()&&(null===(e=this.peek())||void 0===e?void 0:e.isIdentifierOrKeyword()))throw new Error("Expected ':' for node label");if(this.token.isColon()&&!(null===(t=this.peek())||void 0===t?void 0:t.isIdentifierOrKeyword()))throw new Error("Expected node label identifier");this.token.isColon()&&(null===(r=this.peek())||void 0===r?void 0:r.isIdentifierOrKeyword())&&(this.setNextToken(),s=this.token.value||"",this.setNextToken()),this.skipWhitespaceAndComments();let a=new i.default;if(a.properties=new Map(this.parseProperties()),a.label=s,null!==n&&this._state.variables.has(n)){let e=this._state.variables.get(n);if(e instanceof A.default&&e.firstChild()instanceof C.default){const t=e.firstChild().referred;t instanceof i.default&&(e=t)}if(void 0===e||!(e instanceof i.default||e instanceof z.default))throw new Error(`Undefined node reference: ${n}`);a=new o.default(a,e)}else null!==n&&(a.identifier=n,this._state.variables.set(n,a));if(!this.token.isRightParenthesis())throw new Error("Expected closing parenthesis for node definition");return this.setNextToken(),a}*parseProperties(){let e=0;for(;;){if(this.skipWhitespaceAndComments(),!this.token.isOpeningBrace()&&0==e)return;if(!this.token.isOpeningBrace()&&e>0)throw new Error("Expected opening brace");if(this.setNextToken(),this.skipWhitespaceAndComments(),!this.token.isIdentifier())throw new Error("Expected identifier");const t=this.token.value;if(this.setNextToken(),this.skipWhitespaceAndComments(),!this.token.isColon())throw new Error("Expected colon");this.setNextToken(),this.skipWhitespaceAndComments();const r=this.parseExpression();if(null===r)throw new Error("Expected expression");if(this.skipWhitespaceAndComments(),!this.token.isClosingBrace())throw new Error("Expected closing brace");if(this.setNextToken(),yield[t,r],this.skipWhitespaceAndComments(),!this.token.isComma())break;this.setNextToken(),e++}}*parsePatterns(){for(;;){let e=null;if(this.token.isIdentifier()){if(e=this.token.value||"",this.setNextToken(),this.skipWhitespaceAndComments(),!this.token.isEquals())throw new Error("Expected '=' for pattern assignment");this.setNextToken(),this.skipWhitespaceAndComments()}const t=this.parsePattern();if(null===t)break;if(null!==e&&(t.identifier=e,this._state.variables.set(e,t)),yield t,this.skipWhitespaceAndComments(),!this.token.isComma())break;this.setNextToken(),this.skipWhitespaceAndComments()}}parsePattern(){if(!this.token.isLeftParenthesis())return null;const e=new a.default;let t=this.parseNode();if(null===t)throw new Error("Expected node definition");e.addElement(t);let r=null;for(;r=this.parseRelationship(),null!==r;){if(e.addElement(r),t=this.parseNode(),null===t)throw new Error("Expected target node definition");e.addElement(t)}return e}parsePatternExpression(){var e;if(!this.token.isLeftParenthesis())return null;const t=new u.default;let r=this.parseNode();if(null===r)throw new Error("Expected node definition");t.addElement(r);let n=null;for(;n=this.parseRelationship(),null!==n;){if(null===(e=n.hops)||void 0===e?void 0:e.multi())throw new Error("PatternExpression does not support variable-length relationships");if(t.addElement(n),r=this.parseNode(),null===r)throw new Error("Expected target node definition");t.addElement(r)}return t.verify(),t}parseRelationship(){var e;let t="right";if(this.token.isLessThan()&&(null===(e=this.peek())||void 0===e?void 0:e.isSubtract()))t="left",this.setNextToken(),this.setNextToken();else{if(!this.token.isSubtract())return null;this.setNextToken()}if(!this.token.isOpeningBracket())return null;this.setNextToken();let r=null;if(this.token.isIdentifierOrKeyword()&&(r=this.token.value||"",this.setNextToken()),!this.token.isColon())throw new Error("Expected ':' for relationship type");if(this.setNextToken(),!this.token.isIdentifierOrKeyword())throw new Error("Expected relationship type identifier");const n=[this.token.value||""];for(this.setNextToken();this.token.isPipe();){if(this.setNextToken(),this.token.isColon()&&this.setNextToken(),!this.token.isIdentifierOrKeyword())throw new Error("Expected relationship type identifier after '|'");n.push(this.token.value||""),this.setNextToken()}const s=this.parseRelationshipHops(),i=new Map(this.parseProperties());if(!this.token.isClosingBracket())throw new Error("Expected closing bracket for relationship definition");if(this.setNextToken(),!this.token.isSubtract())throw new Error("Expected '-' for relationship definition");this.setNextToken(),this.token.isGreaterThan()&&this.setNextToken();let o=new l.default;if(o.direction=t,o.properties=i,null!==r&&this._state.variables.has(r)){let e=this._state.variables.get(r);if(e instanceof A.default&&e.firstChild()instanceof C.default){const t=e.firstChild().referred;t instanceof l.default&&(e=t)}if(void 0===e||!(e instanceof l.default))throw new Error(`Undefined relationship reference: ${r}`);o=new c.default(o,e)}else null!==r&&(o.identifier=r,this._state.variables.set(r,o));return null!==s&&(o.hops=s),o.types=n,o}parseRelationshipHops(){if(!this.token.isMultiply())return null;const e=new s.default;if(this.setNextToken(),this.token.isNumber()){if(e.min=parseInt(this.token.value||"0"),this.setNextToken(),this.token.isDot()){if(this.setNextToken(),!this.token.isDot())throw new Error("Expected '..' for relationship hops");this.setNextToken(),this.token.isNumber()?(e.max=parseInt(this.token.value||"0"),this.setNextToken()):e.max=Number.MAX_SAFE_INTEGER}}else e.min=0,e.max=Number.MAX_SAFE_INTEGER;return e}parseSubQuery(){if(!this.token.isOpeningBrace())return null;this.setNextToken(),this.expectAndSkipWhitespaceAndComments();const e=this._parseTokenized(!0);if(this.skipWhitespaceAndComments(),!this.token.isClosingBrace())throw new Error("Expected closing brace for sub-query");return this.setNextToken(),e}parseLimit(){if(this.skipWhitespaceAndComments(),!this.token.isLimit())return null;if(this.expectPreviousTokenToBeWhitespaceOrComment(),this.setNextToken(),this.expectAndSkipWhitespaceAndComments(),!this.token.isNumber())throw new Error("Expected number");const e=new B.default(parseInt(this.token.value||"0"));return this.setNextToken(),e}*parseExpressions(e=p.AliasOption.NOT_ALLOWED){for(;;){const t=this.parseExpression();if(null===t)break;{const r=this.parseAlias();if(t.firstChild()instanceof C.default&&null===r){const e=t.firstChild();t.setAlias(e.identifier),this._state.variables.set(e.identifier,t)}else{if(!(e!==p.AliasOption.REQUIRED||null!==r||t.firstChild()instanceof C.default))throw new Error("Alias required");if(e===p.AliasOption.NOT_ALLOWED&&null!==r)throw new Error("Alias not allowed");[p.AliasOption.OPTIONAL,p.AliasOption.REQUIRED].includes(e)&&null!==r&&(t.setAlias(r.getAlias()),this._state.variables.set(r.getAlias(),t))}yield t}if(this.skipWhitespaceAndComments(),!this.token.isComma())break;this.setNextToken()}}parseOperand(e){var t,r;if(this.skipWhitespaceAndComments(),this.token.isIdentifierOrKeyword()&&!(null===(t=this.peek())||void 0===t?void 0:t.isLeftParenthesis())){const t=this.token.value||"",r=new C.default(t,this._state.variables.get(t));this.setNextToken();const n=this.parseLookup(r);return e.addNode(n),!0}if(this.token.isIdentifierOrKeyword()&&(null===(r=this.peek())||void 0===r?void 0:r.isLeftParenthesis())){const t=this.parsePredicateFunction()||this.parseFunction();if(null!==t){const r=this.parseLookup(t);return e.addNode(r),!0}}else if(this.token.isLeftParenthesis()&&this.looksLikeNodePattern()){const t=this.parsePatternExpression();if(null!==t)return e.addNode(t),!0}else{if(this.token.isOperand())return e.addNode(this.token.node),this.setNextToken(),!0;if(this.token.isFString()){const t=this.parseFString();if(null===t)throw new Error("Expected f-string");return e.addNode(t),!0}if(this.token.isLeftParenthesis()){this.setNextToken();const t=this.parseExpression();if(null===t)throw new Error("Expected expression");if(!this.token.isRightParenthesis())throw new Error("Expected right parenthesis");this.setNextToken();const r=this.parseLookup(t);return e.addNode(r),!0}if(this.token.isOpeningBrace()||this.token.isOpeningBracket()){const t=this.parseJSON();if(null===t)throw new Error("Expected JSON object");const r=this.parseLookup(t);return e.addNode(r),!0}if(this.token.isCase()){const t=this.parseCase();if(null===t)throw new Error("Expected CASE statement");return e.addNode(t),!0}if(this.token.isNot()){const t=new b.Not;this.setNextToken();const r=new A.default;if(!this.parseOperand(r))throw new Error("Expected expression after NOT");return r.finish(),t.addChild(r),e.addNode(t),!0}}return!1}looksLikeNodePattern(){const e=this.tokenIndex;if(this.setNextToken(),this.skipWhitespaceAndComments(),this.token.isColon()||this.token.isRightParenthesis())return this.tokenIndex=e,!0;if(this.token.isIdentifierOrKeyword()){this.setNextToken(),this.skipWhitespaceAndComments();const t=this.token.isColon()||this.token.isOpeningBrace()||this.token.isRightParenthesis();return this.tokenIndex=e,t}return this.tokenIndex=e,!1}parseExpression(){const e=new A.default;for(;;){if(!this.parseOperand(e)){if(e.nodesAdded())throw new Error("Expected operand or left parenthesis");break}if(this.skipWhitespaceAndComments(),this.token.isOperator())this.token.isIs()?e.addNode(this.parseIsOperator()):e.addNode(this.token.node);else if(this.token.isIn())e.addNode(this.parseInOperator());else if(this.token.isContains())e.addNode(this.parseContainsOperator());else if(this.token.isStarts())e.addNode(this.parseStartsWithOperator());else if(this.token.isEnds())e.addNode(this.parseEndsWithOperator());else{if(!this.token.isNot())break;{const t=this.parseNotOperator();if(null===t)break;e.addNode(t)}}this.setNextToken()}return e.nodesAdded()?(e.finish(),e):null}parseIsOperator(){const e=this.tokenIndex;return this.setNextToken(),this.skipWhitespaceAndComments(),this.token.isNot()?new b.IsNot:(this.tokenIndex=e,new b.Is)}parseInOperator(){return new b.In}parseContainsOperator(){return new b.Contains}parseStartsWithOperator(){const e=this.tokenIndex;if(this.setNextToken(),this.skipWhitespaceAndComments(),this.token.isWith())return new b.StartsWith;throw this.tokenIndex=e,new Error("Expected WITH after STARTS")}parseEndsWithOperator(){const e=this.tokenIndex;if(this.setNextToken(),this.skipWhitespaceAndComments(),this.token.isWith())return new b.EndsWith;throw this.tokenIndex=e,new Error("Expected WITH after ENDS")}parseNotOperator(){const e=this.tokenIndex;return this.setNextToken(),this.skipWhitespaceAndComments(),this.token.isIn()?new b.NotIn:this.token.isContains()?new b.NotContains:this.token.isStarts()?(this.setNextToken(),this.skipWhitespaceAndComments(),this.token.isWith()?new b.NotStartsWith:(this.tokenIndex=e,null)):this.token.isEnds()?(this.setNextToken(),this.skipWhitespaceAndComments(),this.token.isWith()?new b.NotEndsWith:(this.tokenIndex=e,null)):(this.tokenIndex=e,null)}parseLookup(e){let t=e,r=null;for(;;){if(this.token.isDot()){if(this.setNextToken(),!this.token.isIdentifier()&&!this.token.isKeyword())throw new Error("Expected identifier");r=new R.default,r.index=new k.default(this.token.value||""),r.variable=t,this.setNextToken()}else{if(!this.token.isOpeningBracket())break;{this.setNextToken(),this.skipWhitespaceAndComments();const e=this.parseExpression();let n=null;if(this.skipWhitespaceAndComments(),this.token.isColon())this.setNextToken(),this.skipWhitespaceAndComments(),r=new T.default,n=this.parseExpression();else{if(null===e)throw new Error("Expected expression");r=new R.default}if(this.skipWhitespaceAndComments(),!this.token.isClosingBracket())throw new Error("Expected closing bracket");this.setNextToken(),r instanceof T.default?(r.from=e||new g.default,r.to=n||new g.default):r instanceof R.default&&null!==e&&(r.index=e),r.variable=t}}t=r||t}return t}parseCase(){if(!this.token.isCase())return null;this.setNextToken();const e=new I.default;let t=0;for(this.expectAndSkipWhitespaceAndComments();;){const r=this.parseWhen();if(null===r&&0===t)throw new Error("Expected WHEN");if(null===r&&t>0)break;null!==r&&e.addChild(r),this.expectAndSkipWhitespaceAndComments();const n=this.parseThen();if(null===n)throw new Error("Expected THEN");e.addChild(n),this.expectAndSkipWhitespaceAndComments(),t++}const r=this.parseElse();if(null===r)throw new Error("Expected ELSE");if(e.addChild(r),this.expectAndSkipWhitespaceAndComments(),!this.token.isEnd())throw new Error("Expected END");return this.setNextToken(),e}parseWhen(){if(!this.token.isWhen())return null;this.setNextToken();const e=new L.default;this.expectAndSkipWhitespaceAndComments();const t=this.parseExpression();if(null===t)throw new Error("Expected expression");return e.addChild(t),e}parseThen(){if(!this.token.isThen())return null;this.setNextToken();const e=new W.default;this.expectAndSkipWhitespaceAndComments();const t=this.parseExpression();if(null===t)throw new Error("Expected expression");return e.addChild(t),e}parseElse(){if(!this.token.isElse())return null;this.setNextToken();const e=new j.default;this.expectAndSkipWhitespaceAndComments();const t=this.parseExpression();if(null===t)throw new Error("Expected expression");return e.addChild(t),e}parseAlias(){if(this.skipWhitespaceAndComments(),!this.token.isAs())return null;if(this.expectPreviousTokenToBeWhitespaceOrComment(),this.setNextToken(),this.expectAndSkipWhitespaceAndComments(),!this.token.isIdentifier()&&!this.token.isKeyword()||null===this.token.value)throw new Error("Expected identifier");const e=new f.default(this.token.value||"");return this.setNextToken(),e}parseFunction(){var e;if(!this.token.isIdentifier())return null;if(null===this.token.value)throw new Error("Expected identifier");if(!(null===(e=this.peek())||void 0===e?void 0:e.isLeftParenthesis()))return null;const t=M.default.create(this.token.value);if(t instanceof P.default&&this._state.context.containsType(P.default))throw new Error("Aggregate functions cannot be nested");if(this._state.context.push(t),this.setNextToken(),this.setNextToken(),this.skipWhitespaceAndComments(),this.token.isDistinct()&&(t.distinct=!0,this.setNextToken(),this.expectAndSkipWhitespaceAndComments()),t.parameters=Array.from(this.parseExpressions(p.AliasOption.NOT_ALLOWED)),this.skipWhitespaceAndComments(),!this.token.isRightParenthesis())throw new Error("Expected right parenthesis");return this.setNextToken(),this._state.context.pop(),t}parseAsyncFunction(){var e;if(!this.token.isIdentifier())return null;if(null===this.token.value)return null;if(!M.default.isAsyncProvider(this.token.value))return null;if(!(null===(e=this.peek())||void 0===e?void 0:e.isLeftParenthesis()))return null;const t=M.default.createAsync(this.token.value);if(this.setNextToken(),this.setNextToken(),this.skipWhitespaceAndComments(),t.parameters=Array.from(this.parseExpressions(p.AliasOption.NOT_ALLOWED)),this.skipWhitespaceAndComments(),!this.token.isRightParenthesis())throw new Error("Expected right parenthesis");return this.setNextToken(),t}parsePredicateFunction(){if(!this.ahead([h.default.IDENTIFIER(""),h.default.LEFT_PARENTHESIS,h.default.IDENTIFIER(""),h.default.IN]))return null;if(null===this.token.value)throw new Error("Expected identifier");const e=M.default.createPredicate(this.token.value);if(this.setNextToken(),!this.token.isLeftParenthesis())throw new Error("Expected left parenthesis");if(this.setNextToken(),this.skipWhitespaceAndComments(),!this.token.isIdentifier())throw new Error("Expected identifier");const t=new C.default(this.token.value);if(this._state.variables.set(t.identifier,t),e.addChild(t),this.setNextToken(),this.expectAndSkipWhitespaceAndComments(),!this.token.isIn())throw new Error("Expected IN");this.setNextToken(),this.expectAndSkipWhitespaceAndComments();const r=this.parseExpression();if(null===r)throw new Error("Expected expression");if(!d.default.isInstanceOfAny(r.firstChild(),[x.default,C.default,R.default,D.default]))throw new Error("Expected array or reference");if(e.addChild(r),this.skipWhitespaceAndComments(),!this.token.isPipe())throw new Error("Expected pipe");this.setNextToken();const n=this.parseExpression();if(null===n)throw new Error("Expected expression");e.addChild(n);const s=this.parseWhere();if(null!==s&&e.addChild(s),this.skipWhitespaceAndComments(),!this.token.isRightParenthesis())throw new Error("Expected right parenthesis");return this.setNextToken(),this._state.variables.delete(t.identifier),e}parseFString(){if(!this.token.isFString())return null;const e=new N.default;for(;this.token.isFString()&&(null!==this.token.value&&e.addChild(new S.default(this.token.value)),this.setNextToken(),this.token.isOpeningBrace());){this.setNextToken();const t=this.parseExpression();if(null===t)throw new Error("Expected expression");if(e.addChild(t),!this.token.isClosingBrace())throw new Error("Expected closing brace");this.setNextToken()}return e}parseJSON(){if(this.token.isOpeningBrace()){const e=this.parseAssociativeArray();if(null===e)throw new Error("Expected associative array");return e}if(this.token.isOpeningBracket()){const e=this.parseJSONArray();if(null===e)throw new Error("Expected JSON array");return e}throw new Error("Expected opening brace or bracket")}parseAssociativeArray(){if(!this.token.isOpeningBrace())return null;const e=new E.default;for(this.setNextToken();this.skipWhitespaceAndComments(),!this.token.isClosingBrace();){if(!this.token.isIdentifier()&&!this.token.isKeyword())throw new Error("Expected identifier");const t=this.token.value;if(null===t)throw new Error("Expected string");if(this.setNextToken(),this.skipWhitespaceAndComments(),!this.token.isColon())throw new Error("Expected colon");this.setNextToken(),this.skipWhitespaceAndComments();const r=this.parseExpression();if(null===r)throw new Error("Expected expression");e.addKeyValue(new O.default(t,r)),this.skipWhitespaceAndComments(),this.token.isComma()&&this.setNextToken()}return this.setNextToken(),e}parseJSONArray(){if(!this.token.isOpeningBracket())return null;const e=new x.default;for(this.setNextToken();this.skipWhitespaceAndComments(),!this.token.isClosingBracket();){const t=this.parseExpression();if(null===t)throw new Error("Expected expression");e.addValue(t),this.skipWhitespaceAndComments(),this.token.isComma()&&this.setNextToken()}return this.setNextToken(),e}parseUnion(){if(!this.token.isUnion())return null;let e;return this.setNextToken(),this.skipWhitespaceAndComments(),this.token.isAll()?(e=new Q.default,this.setNextToken()):e=new V.default,e}expectAndSkipWhitespaceAndComments(){if(!this.skipWhitespaceAndComments())throw new Error("Expected whitespace or comment")}skipWhitespaceAndComments(){let e=this.previousToken.isWhitespaceOrComment();for(;this.token.isWhitespace()||this.token.isComment();)this.setNextToken(),e=!0;return e}expectPreviousTokenToBeWhitespaceOrComment(){if(!this.previousToken.isWhitespaceOrComment())throw new Error("Expected whitespace or comment")}}t.default=ee},5838(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(9056));t.default=class{constructor(){this._variables=new Map,this._context=new s.default,this._returns=0}get variables(){return this._variables}get context(){return this._context}get returns(){return this._returns}incrementReturns(){this._returns++}}},8595(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(1542)),i=n(r(3840)),o=n(r(5956)),a=n(r(8587)),u=n(r(2457)),l=n(r(3271)),c=n(r(5196)),h=n(r(3818)),d=r(4783),f=n(r(3198)),p=n(r(3501)),_=n(r(6263)),m=n(r(6667)),v=n(r(1740));t.default=class{static convert(e){if(e.isNumber()){if(null===e.value)throw new Error("Number token has no value");return new h.default(e.value)}if(e.isString()){if(null===e.value)throw new Error("String token has no value");return new f.default(e.value)}if(e.isIdentifier()){if(null===e.value)throw new Error("Identifier token has no value");return new c.default(e.value)}if(e.isOperator()){if(e.isAdd())return new d.Add;if(e.isSubtract())return new d.Subtract;if(e.isMultiply())return new d.Multiply;if(e.isDivide())return new d.Divide;if(e.isModulo())return new d.Modulo;if(e.isExponent())return new d.Power;if(e.isEquals())return new d.Equals;if(e.isNotEquals())return new d.NotEquals;if(e.isLessThan())return new d.LessThan;if(e.isGreaterThan())return new d.GreaterThan;if(e.isGreaterThanOrEqual())return new d.GreaterThanOrEqual;if(e.isLessThanOrEqual())return new d.LessThanOrEqual;if(e.isAnd())return new d.And;if(e.isOr())return new d.Or;if(e.isIs())return new d.Is}else if(e.isUnaryOperator()){if(e.isNot())return new d.Not}else{if(!e.isKeyword()){if(e.isBoolean())return new l.default(e.value);throw new Error("Unknown token")}if(e.isJSON())return new o.default;if(e.isCSV())return new i.default;if(e.isText())return new u.default;if(e.isWhen())return new v.default;if(e.isThen())return new m.default;if(e.isElse())return new p.default;if(e.isEnd())return new _.default;if(e.isNull())return new a.default}return new s.default}}},7825(e,t){var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.RETURN="RETURN",e.MATCH="MATCH",e.OPTIONAL="OPTIONAL",e.WHERE="WHERE",e.CREATE="CREATE",e.VIRTUAL="VIRTUAL",e.MERGE="MERGE",e.DELETE="DELETE",e.DETACH="DETACH",e.SET="SET",e.REMOVE="REMOVE",e.FOREACH="FOREACH",e.WITH="WITH",e.CALL="CALL",e.YIELD="YIELD",e.LOAD="LOAD",e.HEADERS="HEADERS",e.POST="POST",e.FROM="FROM",e.CSV="CSV",e.JSON="JSON",e.TEXT="TEXT",e.AS="AS",e.UNWIND="UNWIND",e.SUM="SUM",e.COLLECT="COLLECT",e.DISTINCT="DISTINCT",e.ORDER="ORDER",e.BY="BY",e.ASC="ASC",e.DESC="DESC",e.SKIP="SKIP",e.LIMIT="LIMIT",e.EOF="EOF",e.CASE="CASE",e.WHEN="WHEN",e.THEN="THEN",e.ELSE="ELSE",e.END="END",e.NULL="NULL",e.IN="IN",e.CONTAINS="CONTAINS",e.STARTS="STARTS",e.ENDS="ENDS",e.UNION="UNION",e.ALL="ALL"}(r||(r={})),t.default=r},2008(e,t){var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.ADD="+",e.SUBTRACT="-",e.MULTIPLY="*",e.DIVIDE="/",e.MODULO="%",e.EXPONENT="^",e.EQUALS="=",e.NOT_EQUALS="<>",e.LESS_THAN="<",e.LESS_THAN_OR_EQUAL="<=",e.GREATER_THAN=">",e.GREATER_THAN_OR_EQUAL=">=",e.IS="IS",e.AND="AND",e.OR="OR",e.NOT="NOT",e.IN="IN",e.PIPE="|"}(r||(r={})),t.default=r},178(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(6519));t.default=class{constructor(e){this.text=e,this._position=0}get position(){return this._position}get currentChar(){return this.text[this.position]}get nextChar(){return this.text[this.position+1]}get previousChar(){return this.text[this.position-1]}get isAtEnd(){return this.position>=this.text.length}getString(e){return this.text.substring(e,this.position)}getRemainingString(){return this.text.substring(this.position)}checkForSingleComment(){if(this.singleLineCommentStart()){for(;!this.isAtEnd&&!this.newLine();)this._position++;return!0}return!1}checkForMultiLineComment(){if(this.multiLineCommentStart()){for(;!this.isAtEnd;){if(this.multiLineCommentEnd())return this._position+=2,!0;this._position++}throw new Error(`Unterminated multi-line comment at position ${this.position}`)}return!1}singleLineCommentStart(){return"/"===this.currentChar&&"/"===this.nextChar}multiLineCommentStart(){return"/"===this.currentChar&&"*"===this.nextChar}multiLineCommentEnd(){return"*"===this.currentChar&&"/"===this.nextChar}newLine(){return"\n"===this.currentChar}escaped(e){return"\\"===this.currentChar&&this.nextChar===e}escapedBrace(){return"{"===this.currentChar&&"{"===this.nextChar||"}"===this.currentChar&&"}"===this.nextChar}openingBrace(){return"{"===this.currentChar}closingBrace(){return"}"===this.currentChar}checkForUnderScore(){const e="_"===this.currentChar;return e&&this._position++,e}checkForLetter(){const e=s.default.letters.includes(this.currentChar.toLowerCase());return e&&this._position++,e}checkForDigit(){const e=s.default.digits.includes(this.currentChar);return e&&this._position++,e}checkForQuote(){const e=this.currentChar;return'"'===e||"'"===e||"`"===e?(this._position++,e):null}checkForString(e){const t=this.text.substring(this.position,this.position+e.length).toLowerCase()===e.toLowerCase();return t&&(this._position+=e.length),t}checkForWhitespace(){return s.default.whitespace.includes(this.currentChar)}checkForFStringStart(){return"f"===this.currentChar.toLowerCase()&&["'",'"',"`"].includes(this.nextChar)}moveNext(){this._position++}moveBy(e){this._position+=e}movePrevious(){this._position--}is_word(e){return null!==e&&this.text.substring(this.position,this.position+e.length)===e}word_continuation(e){const t=this.text[this.position+e.length];return void 0!==t&&s.default.word_valid_chars.includes(t.toLowerCase())}}},4020(e,t){var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.LEFT_PARENTHESIS="(",e.RIGHT_PARENTHESIS=")",e.COMMA=",",e.DOT=".",e.COLON=":",e.WHITESPACE="",e.OPENING_BRACE="{",e.CLOSING_BRACE="}",e.OPENING_BRACKET="[",e.CLOSING_BRACKET="]",e.BACKTICK="`"}(r||(r={})),t.default=r},7847(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(8595)),i=n(r(6519)),o=n(r(7825)),a=n(r(2008)),u=n(r(4020)),l=n(r(8898));class c{constructor(e,t=null){this._position=-1,this._case_sensitive_value=null,this._can_be_identifier=!1,this._type=e,this._value=t,this._can_be_identifier=i.default.can_be_identifier(t||"")}equals(e){return this._type===l.default.IDENTIFIER&&e.type===l.default.IDENTIFIER||this._type===e.type&&this._value===e.value}set position(e){this._position=e}get position(){return this._position}get type(){return this._type}get value(){return this._case_sensitive_value||this._value}set case_sensitive_value(e){this._case_sensitive_value=e}get can_be_identifier(){return this._can_be_identifier}get node(){return s.default.convert(this)}toString(){return`${this._type} ${this._value}`}static COMMENT(e){return new c(l.default.COMMENT,e)}isComment(){return this._type===l.default.COMMENT}static IDENTIFIER(e){return new c(l.default.IDENTIFIER,e)}isIdentifier(){return this._type===l.default.IDENTIFIER||this._type===l.default.BACKTICK_STRING}isIdentifierOrKeyword(){return this.isIdentifier()||this.isKeyword()&&!this.isKeywordThatCannotBeIdentifier()}static STRING(e,t='"'){const r=i.default.unquote(e),n=i.default.removeEscapedQuotes(r,t);return new c(l.default.STRING,n)}isString(){return this._type===l.default.STRING||this._type===l.default.BACKTICK_STRING}static BACKTICK_STRING(e,t='"'){const r=i.default.unquote(e),n=i.default.removeEscapedQuotes(r,t);return new c(l.default.BACKTICK_STRING,n)}static F_STRING(e,t='"'){const r=i.default.unquote(e),n=i.default.removeEscapedQuotes(r,t),s=i.default.removeEscapedBraces(n);return new c(l.default.F_STRING,s)}isFString(){return this._type===l.default.F_STRING}static NUMBER(e){return new c(l.default.NUMBER,e)}isNumber(){return this._type===l.default.NUMBER}static BOOLEAN(e){return new c(l.default.BOOLEAN,e)}isBoolean(){return this._type===l.default.BOOLEAN&&("TRUE"===this._value||"FALSE"===this._value)}static get LEFT_PARENTHESIS(){return new c(l.default.SYMBOL,u.default.LEFT_PARENTHESIS)}isLeftParenthesis(){return this._type===l.default.SYMBOL&&this._value===u.default.LEFT_PARENTHESIS}static get RIGHT_PARENTHESIS(){return new c(l.default.SYMBOL,u.default.RIGHT_PARENTHESIS)}isRightParenthesis(){return this._type===l.default.SYMBOL&&this._value===u.default.RIGHT_PARENTHESIS}static get COMMA(){return new c(l.default.SYMBOL,u.default.COMMA)}isComma(){return this._type===l.default.SYMBOL&&this._value===u.default.COMMA}static get DOT(){return new c(l.default.SYMBOL,u.default.DOT)}isDot(){return this._type===l.default.SYMBOL&&this._value===u.default.DOT}static get COLON(){return new c(l.default.SYMBOL,u.default.COLON)}isColon(){return this._type===l.default.SYMBOL&&this._value===u.default.COLON}static get OPENING_BRACE(){return new c(l.default.SYMBOL,u.default.OPENING_BRACE)}isOpeningBrace(){return this._type===l.default.SYMBOL&&this._value===u.default.OPENING_BRACE}static get CLOSING_BRACE(){return new c(l.default.SYMBOL,u.default.CLOSING_BRACE)}isClosingBrace(){return this._type===l.default.SYMBOL&&this._value===u.default.CLOSING_BRACE}static get OPENING_BRACKET(){return new c(l.default.SYMBOL,u.default.OPENING_BRACKET)}isOpeningBracket(){return this._type===l.default.SYMBOL&&this._value===u.default.OPENING_BRACKET}static get CLOSING_BRACKET(){return new c(l.default.SYMBOL,u.default.CLOSING_BRACKET)}isClosingBracket(){return this._type===l.default.SYMBOL&&this._value===u.default.CLOSING_BRACKET}static get WHITESPACE(){return new c(l.default.WHITESPACE)}isWhitespace(){return this._type===l.default.WHITESPACE}isOperator(){return this._type===l.default.OPERATOR}isUnaryOperator(){return this._type===l.default.UNARY_OPERATOR}static get ADD(){return new c(l.default.OPERATOR,a.default.ADD)}isAdd(){return this._type===l.default.OPERATOR&&this._value===a.default.ADD}static get SUBTRACT(){return new c(l.default.OPERATOR,a.default.SUBTRACT)}isSubtract(){return this._type===l.default.OPERATOR&&this._value===a.default.SUBTRACT}isNegation(){return this.isSubtract()}static get MULTIPLY(){return new c(l.default.OPERATOR,a.default.MULTIPLY)}isMultiply(){return this._type===l.default.OPERATOR&&this._value===a.default.MULTIPLY}static get DIVIDE(){return new c(l.default.OPERATOR,a.default.DIVIDE)}isDivide(){return this._type===l.default.OPERATOR&&this._value===a.default.DIVIDE}static get EXPONENT(){return new c(l.default.OPERATOR,a.default.EXPONENT)}isExponent(){return this._type===l.default.OPERATOR&&this._value===a.default.EXPONENT}static get MODULO(){return new c(l.default.OPERATOR,a.default.MODULO)}isModulo(){return this._type===l.default.OPERATOR&&this._value===a.default.MODULO}static get EQUALS(){return new c(l.default.OPERATOR,a.default.EQUALS)}isEquals(){return this._type===l.default.OPERATOR&&this._value===a.default.EQUALS}static get NOT_EQUALS(){return new c(l.default.OPERATOR,a.default.NOT_EQUALS)}isNotEquals(){return this._type===l.default.OPERATOR&&this._value===a.default.NOT_EQUALS}static get LESS_THAN(){return new c(l.default.OPERATOR,a.default.LESS_THAN)}isLessThan(){return this._type===l.default.OPERATOR&&this._value===a.default.LESS_THAN}static get LESS_THAN_OR_EQUAL(){return new c(l.default.OPERATOR,a.default.LESS_THAN_OR_EQUAL)}isLessThanOrEqual(){return this._type===l.default.OPERATOR&&this._value===a.default.LESS_THAN_OR_EQUAL}static get GREATER_THAN(){return new c(l.default.OPERATOR,a.default.GREATER_THAN)}isGreaterThan(){return this._type===l.default.OPERATOR&&this._value===a.default.GREATER_THAN}static get GREATER_THAN_OR_EQUAL(){return new c(l.default.OPERATOR,a.default.GREATER_THAN_OR_EQUAL)}isGreaterThanOrEqual(){return this._type===l.default.OPERATOR&&this._value===a.default.GREATER_THAN_OR_EQUAL}static get AND(){return new c(l.default.OPERATOR,a.default.AND)}isAnd(){return this._type===l.default.OPERATOR&&this._value===a.default.AND}static get OR(){return new c(l.default.OPERATOR,a.default.OR)}isOr(){return this._type===l.default.OPERATOR&&this._value===a.default.OR}static get NOT(){return new c(l.default.UNARY_OPERATOR,a.default.NOT)}isNot(){return this._type===l.default.UNARY_OPERATOR&&this._value===a.default.NOT}static get IS(){return new c(l.default.OPERATOR,a.default.IS)}isIs(){return this._type===l.default.OPERATOR&&this._value===a.default.IS}isKeyword(){return this._type===l.default.KEYWORD}isKeywordThatCannotBeIdentifier(){return this.isKeyword()&&(this.isNull()||this.isCase()||this.isWhen()||this.isThen()||this.isElse()||this.isEnd())}static get WITH(){return new c(l.default.KEYWORD,o.default.WITH)}isWith(){return this._type===l.default.KEYWORD&&this._value===o.default.WITH}static get RETURN(){return new c(l.default.KEYWORD,o.default.RETURN)}isReturn(){return this._type===l.default.KEYWORD&&this._value===o.default.RETURN}static get LOAD(){return new c(l.default.KEYWORD,o.default.LOAD)}isLoad(){return this._type===l.default.KEYWORD&&this._value===o.default.LOAD}static get CALL(){return new c(l.default.KEYWORD,o.default.CALL)}isCall(){return this._type===l.default.KEYWORD&&this._value===o.default.CALL}static get YIELD(){return new c(l.default.KEYWORD,o.default.YIELD)}isYield(){return this._type===l.default.KEYWORD&&this._value===o.default.YIELD}static get JSON(){return new c(l.default.KEYWORD,o.default.JSON)}isJSON(){return this._type===l.default.KEYWORD&&this._value===o.default.JSON}static get CSV(){return new c(l.default.KEYWORD,o.default.CSV)}isCSV(){return this._type===l.default.KEYWORD&&this._value===o.default.CSV}static get TEXT(){return new c(l.default.KEYWORD,o.default.TEXT)}isText(){return this._type===l.default.KEYWORD&&this._value===o.default.TEXT}static get FROM(){return new c(l.default.KEYWORD,o.default.FROM)}isFrom(){return this._type===l.default.KEYWORD&&this._value===o.default.FROM}static get HEADERS(){return new c(l.default.KEYWORD,o.default.HEADERS)}isHeaders(){return this._type===l.default.KEYWORD&&this._value===o.default.HEADERS}static get POST(){return new c(l.default.KEYWORD,o.default.POST)}isPost(){return this._type===l.default.KEYWORD&&this._value===o.default.POST}static get UNWIND(){return new c(l.default.KEYWORD,o.default.UNWIND)}isUnwind(){return this._type===l.default.KEYWORD&&this._value===o.default.UNWIND}static get MATCH(){return new c(l.default.KEYWORD,o.default.MATCH)}isMatch(){return this._type===l.default.KEYWORD&&this._value===o.default.MATCH}static get OPTIONAL(){return new c(l.default.KEYWORD,o.default.OPTIONAL)}isOptional(){return this._type===l.default.KEYWORD&&this._value===o.default.OPTIONAL}static get AS(){return new c(l.default.KEYWORD,o.default.AS)}isAs(){return this._type===l.default.KEYWORD&&this._value===o.default.AS}static get WHERE(){return new c(l.default.KEYWORD,o.default.WHERE)}isWhere(){return this._type===l.default.KEYWORD&&this._value===o.default.WHERE}static get MERGE(){return new c(l.default.KEYWORD,o.default.MERGE)}isMerge(){return this._type===l.default.KEYWORD&&this._value===o.default.MERGE}static get CREATE(){return new c(l.default.KEYWORD,o.default.CREATE)}isCreate(){return this._type===l.default.KEYWORD&&this._value===o.default.CREATE}static get VIRTUAL(){return new c(l.default.KEYWORD,o.default.VIRTUAL)}isVirtual(){return this._type===l.default.KEYWORD&&this._value===o.default.VIRTUAL}static get DELETE(){return new c(l.default.KEYWORD,o.default.DELETE)}isDelete(){return this._type===l.default.KEYWORD&&this._value===o.default.DELETE}static get SET(){return new c(l.default.KEYWORD,o.default.SET)}isSet(){return this._type===l.default.KEYWORD&&this._value===o.default.SET}static get REMOVE(){return new c(l.default.KEYWORD,o.default.REMOVE)}isRemove(){return this._type===l.default.KEYWORD&&this._value===o.default.REMOVE}static get CASE(){return new c(l.default.KEYWORD,o.default.CASE)}isCase(){return this._type===l.default.KEYWORD&&this._value===o.default.CASE}static get WHEN(){return new c(l.default.KEYWORD,o.default.WHEN)}isWhen(){return this._type===l.default.KEYWORD&&this._value===o.default.WHEN}static get THEN(){return new c(l.default.KEYWORD,o.default.THEN)}isThen(){return this._type===l.default.KEYWORD&&this._value===o.default.THEN}static get ELSE(){return new c(l.default.KEYWORD,o.default.ELSE)}isElse(){return this._type===l.default.KEYWORD&&this._value===o.default.ELSE}static get END(){return new c(l.default.KEYWORD,o.default.END)}isEnd(){return this._type===l.default.KEYWORD&&this._value===o.default.END}static get NULL(){return new c(l.default.KEYWORD,o.default.NULL)}isNull(){return this._type===l.default.KEYWORD&&this._value===o.default.NULL}static get IN(){return new c(l.default.KEYWORD,o.default.IN)}isIn(){return this._type===l.default.KEYWORD&&this._value===o.default.IN}static get CONTAINS(){return new c(l.default.KEYWORD,o.default.CONTAINS)}isContains(){return this._type===l.default.KEYWORD&&this._value===o.default.CONTAINS}static get STARTS(){return new c(l.default.KEYWORD,o.default.STARTS)}isStarts(){return this._type===l.default.KEYWORD&&this._value===o.default.STARTS}static get ENDS(){return new c(l.default.KEYWORD,o.default.ENDS)}isEnds(){return this._type===l.default.KEYWORD&&this._value===o.default.ENDS}static get PIPE(){return new c(l.default.KEYWORD,a.default.PIPE)}isPipe(){return this._type===l.default.KEYWORD&&this._value===a.default.PIPE}static get DISTINCT(){return new c(l.default.KEYWORD,o.default.DISTINCT)}isDistinct(){return this._type===l.default.KEYWORD&&this._value===o.default.DISTINCT}static get LIMIT(){return new c(l.default.KEYWORD,o.default.LIMIT)}isLimit(){return this._type===l.default.KEYWORD&&this._value===o.default.LIMIT}static get UNION(){return new c(l.default.KEYWORD,o.default.UNION)}isUnion(){return this._type===l.default.KEYWORD&&this._value===o.default.UNION}static get ALL(){return new c(l.default.KEYWORD,o.default.ALL)}isAll(){return this._type===l.default.KEYWORD&&this._value===o.default.ALL}static get EOF(){return new c(l.default.EOF)}isEOF(){return this._type===l.default.EOF}isOperand(){return this.isNumber()||this.isBoolean()||this.isString()||this.isNull()}isWhitespaceOrComment(){return this.isWhitespace()||this.isComment()}isSymbol(){return this._type===l.default.SYMBOL}static method(e){return c[e.toUpperCase()]}}t.default=c},299(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(7847)),i=n(r(8652));t.default=class{constructor(e){this._enum=e,this._trie=new i.default;for(const[t,r]of Object.entries(e)){const e=s.default.method(t);void 0!==e&&null!==e.value&&this._trie.insert(e)}}map(e){return this._trie.find(e)}get last_found(){return this._trie.last_found}}},8898(e,t){var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.KEYWORD="KEYWORD",e.BOOLEAN="BOOLEAN",e.OPERATOR="OPERATOR",e.UNARY_OPERATOR="UNARY_OPERATOR",e.IDENTIFIER="IDENTIFIER",e.STRING="STRING",e.F_STRING="F-STRING",e.BACKTICK_STRING="BACKTICK_STRING",e.NUMBER="NUMBER",e.SYMBOL="SYMBOL",e.WHITESPACE="WHITESPACE",e.COMMENT="COMMENT",e.EOF="EOF"}(r||(r={})),t.default=r},3479(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(6519)),i=n(r(7825)),o=n(r(2008)),a=n(r(178)),u=n(r(4020)),l=n(r(7847)),c=n(r(299));t.default=class{constructor(e){this.keywords=new c.default(i.default),this.symbols=new c.default(u.default),this.operators=new c.default(o.default),this.walker=new a.default(e)}tokenize(){const e=[];let t=null;for(;!this.walker.isAtEnd;){e.push(...this.f_string()),t=this.getLastNonWhitespaceOrNonCommentToken(e)||t;const r=this.getNextToken(t);if(null===r)throw new Error(`Unrecognized token at position ${this.walker.position}`);r.position=this.walker.position,e.push(r)}return e}getLastNonWhitespaceOrNonCommentToken(e){return 0===e.length||e[e.length-1].isWhitespaceOrComment()?null:e[e.length-1]}getNextToken(e=null){return this.walker.isAtEnd?l.default.EOF:this.comment()||this.whitespace()||this.lookup(this.keywords)||this.lookup(this.operators,e,this.skipMinus)||this.boolean()||this.identifier()||this.string()||this.number()||this.lookup(this.symbols)}comment(){const e=this.walker.position;if(this.walker.checkForSingleComment()||this.walker.checkForMultiLineComment()){const t=s.default.uncomment(this.walker.getString(e));return l.default.COMMENT(t)}return null}boolean(){const e=this.walker.position;return this.walker.checkForString("TRUE")||this.walker.checkForString("FALSE")?l.default.BOOLEAN(this.walker.getString(e).toUpperCase()):null}identifier(){const e=this.walker.position;if(this.walker.checkForUnderScore()||this.walker.checkForLetter()){for(;!this.walker.isAtEnd&&(this.walker.checkForLetter()||this.walker.checkForDigit()||this.walker.checkForUnderScore()););return l.default.IDENTIFIER(this.walker.getString(e))}return null}string(){const e=this.walker.position,t=this.walker.checkForQuote();if(null===t)return null;for(;!this.walker.isAtEnd;)if(this.walker.escaped(t))this.walker.moveNext(),this.walker.moveNext();else{if(this.walker.checkForString(t)){const r=this.walker.getString(e);return t===u.default.BACKTICK?l.default.BACKTICK_STRING(r,t):l.default.STRING(r,t)}this.walker.moveNext()}throw new Error(`Unterminated string at position ${e}`)}*f_string(){if(!this.walker.checkForFStringStart())return;this.walker.moveNext();let e=this.walker.position;const t=this.walker.checkForQuote();if(null!==t)for(;!this.walker.isAtEnd;)if(this.walker.escaped(t)||this.walker.escapedBrace())this.walker.moveNext(),this.walker.moveNext();else{if(this.walker.openingBrace())for(yield l.default.F_STRING(this.walker.getString(e),t),e=this.walker.position,yield l.default.OPENING_BRACE,this.walker.moveNext(),e=this.walker.position;!this.walker.isAtEnd&&!this.walker.closingBrace();){const t=this.getNextToken();if(null===t)break;if(yield t,this.walker.closingBrace()){yield l.default.CLOSING_BRACE,this.walker.moveNext(),e=this.walker.position;break}}if(this.walker.checkForString(t))return void(yield l.default.F_STRING(this.walker.getString(e),t));this.walker.moveNext()}}whitespace(){let e=!1;for(;!this.walker.isAtEnd&&this.walker.checkForWhitespace();)this.walker.moveNext(),e=!0;return e?l.default.WHITESPACE:null}number(){const e=this.walker.position;if(this.walker.checkForString("-")||this.walker.checkForDigit()){for(;!this.walker.isAtEnd&&this.walker.checkForDigit(););if(this.walker.checkForString(u.default.DOT)){let e=0;for(;!this.walker.isAtEnd&&this.walker.checkForDigit();)e++;0===e&&this.walker.movePrevious()}const t=this.walker.getString(e);return l.default.NUMBER(t)}return null}lookup(e,t=null,r){const n=e.map(this.walker.getRemainingString());return void 0!==n&&null!==n.value?n.can_be_identifier&&this.walker.word_continuation(n.value)||r&&t&&r(t,n)?null:(this.walker.moveBy(n.value.length),null!==e.last_found&&(n.case_sensitive_value=e.last_found),n):null}skipMinus(e,t){return null!==e&&!(!(e.isKeyword()||e.isComma()||e.isColon())||!t.isNegation())}}},8652(e,t){Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this._children=new Map,this._token=void 0}map(e){return this._children.get(e)||this._children.set(e,new r).get(e)}retrieve(e){return this._children.get(e)}set token(e){this._token=e}get token(){return this._token}is_end_of_word(){return void 0!==this._token}no_children(){return 0===this._children.size}}t.default=class{constructor(){this._root=new r,this._max_length=0,this._last_found=null}insert(e){if(null===e.value||0===e.value.length)throw new Error("Token value cannot be null or empty");let t=this._root;for(const r of e.value)t=t.map(r.toLowerCase());e.value.length>this._max_length&&(this._max_length=e.value.length),t.token=e}find(e){if(0===e.length)return;let t,r,n=0;for(this._last_found=null;void 0!==(t=(t||this._root).retrieve(e[n].toLowerCase()))&&(t.is_end_of_word()&&(r=t.token,this._last_found=e.substring(0,n+1)),n++,!(n===e.length||n>this._max_length)););return(null==t?void 0:t.is_end_of_word())&&(r=t.token,this._last_found=e.substring(0,n)),r}get last_found(){return this._last_found}}},3001(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{static isInstanceOfAny(e,t){return t.some(t=>e instanceof t)}}},6519(e,t){Object.defineProperty(t,"__esModule",{value:!0});class r{static unquote(e){if(0===e.length)return e;if(1===e.length&&r.quotes.includes(e))return"";const t=e[0],n=e[e.length-1];return r.quotes.includes(t)&&t===n?e.substring(1,e.length-1):r.quotes.includes(n)&&t!==n?e.substring(0,e.length-1):r.quotes.includes(t)&&t!==n?e.substring(1):e}static uncomment(e){return e.length<2?e:"/"===e[0]&&"/"===e[1]?e.substring(2):"/"===e[0]&&"*"===e[1]&&"*"===e[e.length-2]&&"/"===e[e.length-1]?e.substring(2,e.length-2):e}static removeEscapedQuotes(e,t){let r="";for(let n=0;n<e.length;n++)"\\"===e[n]&&e[n+1]===t&&n++,r+=e[n];return r}static removeEscapedBraces(e){let t="";for(let r=0;r<e.length;r++)("{"===e[r]&&"{"===e[r+1]||"}"===e[r]&&"}"===e[r+1])&&r++,t+=e[r];return t}static can_be_identifier(e){const t=e.toLowerCase();return 0!==t.length&&!(!r.letters.includes(t[0])&&"_"!==t[0])&&t.split("").every(e=>r.word_valid_chars.includes(e))}}r.quotes=['"',"'","`"],r.letters="abcdefghijklmnopqrstuvwxyz",r.digits="0123456789",r.whitespace=" \t\n\r",r.word_valid_chars=r.letters+r.digits+"_",t.default=r}},t={},r=function r(n){var s=t[n];if(void 0!==s)return s.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}(610);return r.default})());